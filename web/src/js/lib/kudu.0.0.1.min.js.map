{"version":3,"sources":["utils/utils.js","router/router.js","utils/ajaxTracker.js","utils/simpleAjaxTracker.js","lifecycle/onInitHandler.js","lifecycle/onRemoveHandler.js","ractivelib/setupEvents.js","ractivelib/setupDefaultEvents.js","transition/fade.js","transition/intro.js","transition/outro.js","utils/severity.js","ractivelib/render/create.js","ractivelib/render/render.js","ractivelib/render/unrender.js","ractivelib/RactiveViewFactory.js","kudu.js"],"names":["define","require","utils","options","that","deferred","$","Deferred","resolve","noopPromise","promise","isPromise","o","then","isRactiveObject","_guid","objectLength","Object","keys","length","prop","count","hasOwnProperty","resolveUnknownRoutes","hashIndex","window","location","href","indexOf","defaultRoute","Error","path","router","urlPath","stripLeadingSlash","module","reject","newRoute","ctrl","moduleId","appendHashParams","hash","params","paramStr","param","str","slice","setIgnoreHashChangeOnce","newHash","currentHash","ignoreHashChangeOnce","appendUrlSegment","url","segment","unknownRouteResolver","unknownRoute","cachedUrlPaths","cachedRouterParams","cachedRouterQueryParams","eventHandlers","statechange","routeload","routes","routesById","previousState","popstateHashchangeEventLisener","getHash","fire","init","addRoutes","addEventListener","attachEvent","loadCurrentRouteOnStateChange","on","loadCurrentRoute","fireInitialStateChange","activeRoute","key","addRoute","route","push","id","addRouteById","addRouteAt","index","splice","undefined","getRoutes","getRoutesById","eventName","eventHandler","eventArguments","Array","prototype","call","arguments","i","apply","off","eventHandlerIndex","go","args","routeParams","updateUrl","tempRoute","tmpHash","hashPath","setHash","loadModule","ctrlRoutes","findRoutesForCtrl","testRoute","match","testCtrlRoute","console","error","debugRoute","force","routePath","RegExp","routeQueryParams","routeQueryParamsStr","queryString","parseRouteQueryParams","substr","routePathSegments","split","routePathSegment","charAt","routePathKey","routeParamValue","JSON","stringify","routeParamKey","result","viewParams","parseRouteParams","viewParamValue","routeToLoad","handleUnknownRoute","routeOrPromise","loadUnknownRoute","paths","isNew","processLoadedModule","splitUrl","relativeUri","join","isHashEmpty","substring","active","urlParams","routeArguments","routerOptions","extend","test","urlPathSegments","routePathQuestionIndex","urlPathSegment","tmpRoutePath","tempParams","urlParamValue","routeSegmentIndex","routeSegment","questionmarkIndex","search","queryParams","queryParamsFromSearchString","parseArguments","searchIndex","hashPathIndex","hashBangPathIndex","queryParameters","queryParameter","queryParameterParts","value","arg","isNaN","decodeURIComponent","routerQueryParams","hit","routeQueryParameters","routeQueryParameter","query","toString","idx","ajaxTracker","kudu","abortItems","promisesArray","promisesCopy","each","item","abort","globalPromise","addListeners","target","globalPromiseParam","promiseParam","data","status","jqXHR","triggerOptions","isXhr","promiseArgs","trigger","always","dataOrjqXHR","errorOrjqXHR","remove","xhr","getAllResponseHeaders","idCounter","promiseCounter","promisesMap","add","when","_id","jqpromiseArray","clear","simpleAjaxTracker","create","adaptor","jqXhr","onInitHandler","onInit","viewOptions","prev","ractiveFnOrPromise","onRemoveHandler","onRemove","view","next","booleanOrPromise","bool","mvc","requestTracker","warn","setupEvents","this","transitionsEnabled","setupDefaultEvents","Ractive","defaults","onconstruct","fade","intro","done","duration","firstView","fadeIn","outro","fadeOut","fx","transition","severity","DEBUG","INFO","WARNING","ERROR","viewOrPromise","level","message","ractiveObj","isFunction","render","unrender","ractiveViewFactory","createView","renderView","unrenderView","processOnInit","onInitOptions","triggerEvent","processNewView","onInitComplete","processOnRemove","onRemoveOptions","currentMVC","callstack","reenableAnimationTracker","enable","reenableAnimations","setTimeout","viewFailed","errorArray","errors","isArray","initOptions","debug","stack","cancelCurrentRequest","setId","obj","defineProperty","enumerable","writable","lc","viewFactory","ajaxTrackerFn","validateInitOptions","routeOptions","getActiveRoute","initialRoute","routeLoaded","setupDefaultViewEvents","getDefaultTarget","simpleAjaxTrackerFn","stop","createController","arg1","e","Module","Function","setupViewEvents","renderer","enter","leave","customRenderView","renderViewWithAnimation","callViewEvent","currOptions","prevOptions","eventOptions","introOptions","introFn","outroOptions","outroFn","customLeave","leaveFn","leaveCleanupFn","leaveOptions","unrenderViewCleanup","leavePromise","customEnter","enterOptions","enterFn","enterCleanupFn","renderViewCleanup","enterPromise","renderPromise","updateMVC","unrenderPromise"],"mappings":"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EAAApU,EAAA,sBACAsU,EAAAtU,EAAA,sBACA0Q,EAAA1Q,EAAA,mCAEA8P,EAAA9P,EAAA,oBACAC,EAAAD,EAAA,iBAs4BAqI,EAAAqD,GACA,OAAArD;AhBn6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA,AD2DA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACviCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA,ADuBA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA,AD2EA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA,ADaA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA,ADyBA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA,AD2BA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"kudu.0.0.1.min.js","sourcesContent":["define('utils/utils',['require','jquery'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\n\tfunction utils(options) {\n\n\t\tvar that = {};\n\n\t\tvar deferred = $.Deferred();\n\t\tdeferred.resolve();\n\t\tvar noopPromise = deferred.promise();\n\t\t\n\t\tthat.noopPromise = function() {\n\t\t\treturn noopPromise;\n\t\t}\n\n\t\tthat.isPromise = function (o) {\n\t\t\tif (o == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (typeof o.then === 'function') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthat.isRactiveObject = function (o) {\n\t\t\tif ((typeof o == \"object\") && (o !== null)) {\n\t\t\t\tif (o._guid != null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthat.objectLength = function (o) {\n\t\t\tif (Object.keys) {\n\t\t\t\treturn Object.keys(o).length;\n\t\t\t}\n\n\t\t\tvar count = 0;\n\t\t\tvar prop;\n\t\t\tfor (prop in o) {\n\t\t\t\tif (o.hasOwnProperty(prop)) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\treturn that;\n\t}\n\n\tvar utils = utils();\n\treturn utils;\n\n});\n","// https://github.com/erikringsmuth/requirejs-router#\n// \n// RequireJS Router - A scalable, lazy loading, AMD router.\n//\n// Version: 0.8.0\n// \n// The MIT License (MIT)\n// Copyright (c) 2014 Erik Ringsmuth\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n// IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE\n// OR OTHER DEALINGS IN THE SOFTWARE.\n\ndefine('router/router',['require','jquery','../utils/utils'],function (require) {\n\t'use strict';\n\n\tvar $ = require(\"jquery\");\n\tvar utils = require(\"../utils/utils\");\n\n\t// Private closure variables\n\tvar cachedUrlPaths = {};\n\tvar cachedRouterParams = {};\n\tvar cachedRouterQueryParams = {};\n\tvar eventHandlers = {\n\t\tstatechange: [],\n\t\trouteload: []\n\t};\n\n\t// routes - All registered routes\n\tvar routes = [];\n\n\tvar routesById = {};\n\n\tvar unknownRouteResolver;\n\n\tvar defaultRoute;\n\n\tvar unknownRoute;\n\n\tvar noop = function () {\n\t};\n\n\tvar ignoreHashChangeOnce = false;\n\n\tvar currentHash;\n\n\t// In some modern browsers a hashchange also fires a popstate. There isn't a check to see if the browser will fire\n\t// one or both. We have to keep track of the previous state to prevent it from fireing a statechange twice.\n\tvar previousState = '';\n\tvar popstateHashchangeEventLisener = function popstateHashchangeEventLisener() {\n\t\tif (previousState != window.location.href) {\n\t\t\tpreviousState = window.location.href;\n\t\t\tcurrentHash = router.getHash();\n\t\t\trouter.fire('statechange');\n\t\t}\n\t};\n\n\t// router public interface\n\t//\n\t// There is only one instance of the router. Loading it in multiple modules will always load the same router.\n\tvar router = {\n\t\t// router.init([options]) - initializes the router\n\t\tinit: function (options) {\n\t\t\tcurrentHash = router.getHash();\n\t\t\tif (typeof (options) === 'undefined') {\n\t\t\t\toptions = {};\n\t\t\t}\n\t\t\trouter.addRoutes(options.routes);\n\t\t\tunknownRouteResolver = options.unknownRouteResolver || resolveUnknownRoutes;\n\t\t\tdefaultRoute = options.defaultRoute || null;\n\n\t\t\t// Set up the window popstate and hashchange event listeners\n\t\t\tif (window.addEventListener) {\n\t\t\t\twindow.addEventListener('popstate', popstateHashchangeEventLisener, false);\n\t\t\t\twindow.addEventListener('hashchange', popstateHashchangeEventLisener, false);\n\t\t\t} else {\n\t\t\t\t// IE 8 and lower\n\t\t\t\twindow.attachEvent('popstate', popstateHashchangeEventLisener); // In case pushState has been polyfilled\n\t\t\t\twindow.attachEvent('onhashchange', popstateHashchangeEventLisener);\n\t\t\t}\n\n\t\t\t// Call loadCurrentRoute on every statechange event\n\t\t\tif (options.loadCurrentRouteOnStateChange !== false) {\n\t\t\t\trouter.on('statechange', function () {\n\n\t\t\t\t\tif (ignoreHashChangeOnce) {\n\t\t\t\t\t\t// Ensure future hashchange events are not ignored\n\t\t\t\t\t\tignoreHashChangeOnce = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar options = {};\n\t\t\t\t\trouter.loadCurrentRoute(options);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Fire the initial statechange event\n\t\t\tif (options.fireInitialStateChange !== false) {\n\t\t\t\trouter.fire('statechange');\n\t\t\t}\n\n\t\t\treturn router;\n\t\t},\n\t\t//routes: {},\n\t\t// router.activeRoute - A reference to the active route\n\t\tactiveRoute: {},\n\t\t// router.addRoutes(routes) - Register routes\n\t\t//\n\t\t// This will add the routes to the existing routes. Specifying a route with the same name as an existing route will\n\t\t// overwrite the previous route with the new one.\n\t\t//\n\t\t// Example\n\t\t// router.addRoutes({\n\t\t//   home: {path: '/', moduleId: 'home/homeView'},\n\t\t//   customer: {path: '/customer/:id', moduleId: 'customer/customerView'},\n\t\t//   notFound: {path: '*', moduleId: 'notFound/notFoundView'}\n\t\t// })\n\t\taddRoutes: function (routes) {\n\t\t\tfor (var key in routes) {\n\t\t\t\tif (routes.hasOwnProperty(key)) {\n\t\t\t\t\trouter.addRoute(routes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn router;\n\t\t},\n\t\taddRoute: function (route) {\n\t\t\troutes.push(route);\n\n\t\t\tif (route.moduleId == null) {\n\t\t\t\tif (route.ctrl == null) {\n\t\t\t\t\tthrow new Error(\"route must have a ctrl or moduleId defined!\");\n\t\t\t\t}\n\n\t\t\t\troute.moduleId = route.ctrl.id;\n\t\t\t}\n\t\t\trouter.addRouteById(route);\n\t\t\treturn router;\n\t\t},\n\t\taddRouteAt: function (index, route) {\n\t\t\troutes.splice(index, 0, route);\n\t\t\trouter.addRouteById(route);\n\t\t\treturn router;\n\t\t},\n\t\taddRouteById: function (route) {\n\n\t\t\tif (route.path === '*') {\n\t\t\t\tunknownRoute = route;\n\t\t\t}\n\n\t\t\t// Multiple paths can be mapped to same route, so we use array\n\t\t\tif (routesById[route.moduleId] === undefined) {\n\t\t\t\troutesById[route.moduleId] = [];\n\t\t\t}\n\n\t\t\troutesById[route.moduleId].push(route.path);\n\t\t},\n\t\tgetRoutes: function () {\n\t\t\treturn routes;\n\t\t},\n\t\tgetRoutesById: function () {\n\t\t\treturn routesById;\n\t\t},\n\t\t// router.on(eventName, eventHandler([arg1, [arg2]]) {}) - Register an event handler\n\t\t//\n\t\t// The two main events are 'statechange' and 'routeload'.\n\t\ton: function on(eventName, eventHandler) {\n\t\t\tif (typeof (eventHandlers[eventName]) === 'undefined')\n\t\t\t\teventHandlers[eventName] = [];\n\t\t\teventHandlers[eventName].push(eventHandler);\n\t\t\treturn router;\n\t\t},\n\t\t// router.fire(eventName, [arg1, [arg2]]) - Fire an event\n\t\t//\n\t\t// This will call all eventName event handlers with the arguments passed in.\n\t\tfire: function fire(eventName) {\n\t\t\tif (eventHandlers[eventName]) {\n\t\t\t\tvar eventArguments = Array.prototype.slice.call(arguments, 1);\n\t\t\t\tfor (var i = 0; i < eventHandlers[eventName].length; i++) {\n\t\t\t\t\teventHandlers[eventName][i].apply(router, eventArguments);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn router;\n\t\t},\n\t\t// router.off(eventName, eventHandler) - Remove an event handler\n\t\t//\n\t\t// If you want remove an event handler you need to keep a reference to it so you can tell router.off() with the\n\t\t// original event handler.\n\t\toff: function off(eventName, eventHandler) {\n\t\t\tif (eventHandlers[eventName]) {\n\t\t\t\tvar eventHandlerIndex = eventHandlers[eventName].indexOf(eventHandler);\n\t\t\t\tif (eventHandlerIndex !== -1) {\n\t\t\t\t\teventHandlers[eventName].splice(eventHandlerIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn router;\n\t\t},\n\t\tgo: function (options) {\n\n\t\t\tvar ctrl = options.ctrl;\n\t\t\tvar moduleId;\n\n\t\t\tif (ctrl == null) {\n\t\t\t\tif (options.route) {\n\t\t\t\t\tctrl = options.route.ctrl;\n\t\t\t\t\tmoduleId = options.route.moduleId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ctrl == null) {\n\t\t\t\tthrow new Error(\"router.go() requires a 'ctrl' passed as an option !\");\n\t\t\t}\n\n\t\t\tif (moduleId == null) {\n\t\t\t\tmoduleId = ctrl.id;\n\t\t\t}\n\n\t\t\toptions.args = options.args || {};\n\t\t\toptions.routeParams = options.routeParams || {};\n\n\t\t\tif (options.updateUrl === false) {\n\t\t\t\tvar tempRoute = {};\n\t\t\t\ttempRoute.moduleId = moduleId;\n\t\t\t\ttempRoute.ctrl = ctrl;\n\t\t\t\toptions.route = tempRoute;\n\n\t\t\t\tvar tmpHash = router.hashPath(currentHash);\n\t\t\t\ttmpHash = appendHashParams(tmpHash, options.routeParams);\n\t\t\t\tsetIgnoreHashChangeOnce(tmpHash);\n\t\t\t\trouter.setHash(tmpHash);\n\t\t\t\trouter.loadModule(options);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar route = null;\n\n\t\t\t//var currentPath = router.urlPath(window.location.href);\n\t\t\tvar ctrlRoutes = router.findRoutesForCtrl(ctrl);\n\t\t\tfor (var i = 0; i < ctrlRoutes.length; i++) {\n\t\t\t\tvar testRoute = ctrlRoutes[i];\n\t\t\t\tvar match = router.testCtrlRoute(testRoute.path, options.routeParams);\n\t\t\t\tif (match) {\n\t\t\t\t\troute = testRoute;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (route == null) {\n\t\t\t\tconsole.error(\"No route matched request to Controller '\" + ctrl.id + \"'! Available routes for this controller: \");\n\t\t\t\tfor (var i = 0; i < ctrlRoutes.length; i++) {\n\t\t\t\t\tvar debugRoute = ctrlRoutes[i];\n\t\t\t\t\tconsole.error(\"    \", debugRoute.path);\n\t\t\t\t}\n\t\t\t\tconsole.error(\"RouteParams used to match available Controller routes:\", options.routeParams);\n\n\t\t\t\tif (options.force) {\n\t\t\t\t\tconsole.error(\"options.force is true: will attempt to load the controller from moduleId: '\" + moduleId + \"'\");\n\n\t\t\t\t} else {\n\t\t\t\t\toptions.route = unknownRoute;\n\t\t\t\t\tif (options.route == null) {\n\t\t\t\t\t\toptions.route = {};\n\t\t\t\t\t}\n\t\t\t\t\trouter.loadModule(options);\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set routePath, if route is null use moduleId\n\t\t\tvar routePath = route != null ? route.path : moduleId;\n\t\t\t//routePath = stripLeadingSlash(routePath);\n\n\n\t\t\t// TODO instead of throwing error for unsupported paths, we could remove the hash from the url and still render the Controller\n\t\t\tif (routePath instanceof RegExp) {\n\t\t\t\tthrow new Error(\"Cannot route to controller '\" + ctrl.id + \"' since it's route path is a RegExp '\" + routePath + \"'\");\n\t\t\t}\n\n\t\t\tif (routePath.indexOf('*') !== -1) {\n\t\t\t\tthrow new Error(\"Cannot route to controller '\" + ctrl.id + \"' since it's route path contains wildcards '*'. The given route for the controller is '\" + routePath + \"'\");\n\t\t\t}\n\n\t\t\tvar routeQueryParams = {};\n\n\t\t\t// Extract query params from route\n\t\t\tif (routePath.indexOf('?') !== -1) {\n\t\t\t\tvar routeQueryParamsStr = router.queryString(routePath);\n\t\t\t\tif (routeQueryParamsStr.length > 0) {\n\t\t\t\t\trouteQueryParams = router.parseRouteQueryParams(routeQueryParamsStr);\n\t\t\t\t}\n\t\t\t\t// TODO we must build up the route dynamically. Next parse the path segments!\n\t\t\t\troutePath = routePath.substr(0, routePath.indexOf('?'));\n\t\t\t}\n\n\t\t\tvar newHash = '';\n\t\t\tvar routeParams = options.routeParams;\n\n\t\t\t//propertyTypeEdit/:name?id&ok\n\t\t\tvar routePathSegments = routePath.split('/');\n\n\t\t\t// Check and append each path segment\n\t\t\tfor (var key in routePathSegments) {\n\t\t\t\tif (routePathSegments.hasOwnProperty(key)) {\n\t\t\t\t\tvar routePathSegment = routePathSegments[key];\n\n\t\t\t\t\t// Check if routePathSegment is a parameter like ':id'\n\t\t\t\t\tif (routePathSegment.charAt(0) === ':') {\n\t\t\t\t\t\tvar routePathKey = routePathSegment.substr(1);\n\n\t\t\t\t\t\t// Ensure the url has a valid value for the matching segment\n\t\t\t\t\t\t// Ensure value is not null or empty\n\t\t\t\t\t\tvar routeParamValue = routeParams[routePathKey];\n\n\t\t\t\t\t\tif (routeParamValue == null || routeParamValue === '') {\n\t\t\t\t\t\t\tthrow new Error(\"Cannot route to controller '\" + ctrl.id + \"' since it's route requires the path parameter '\"\n\t\t\t\t\t\t\t\t\t+ routePathKey + \"' but the only params provided are '\" + JSON.stringify(routeParams) + \"'\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewHash = appendUrlSegment(newHash, routeParamValue);\n\n\t\t\t\t\t\t// We have added the routeParam value. Delete the route parameter so it is not included in the query parameters below\n\t\t\t\t\t\tdelete routeParams[routePathKey];\n\n\t\t\t\t\t\t// continue and check the other segments\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// This is a normal path segment, so append to newHash\n\t\t\t\t\t\tnewHash = appendUrlSegment(newHash, routePathSegment);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// strip leading '/' if present\n\t\t\t/* if (newHash.indexOf('/') === 0) {\n\t\t\t newHash = newHash.substr(1);\n\t\t\t }*/\n\n\t\t\t// add parameters to newHash\n\n\t\t\t// Check that the expected route query params are present in the passed in route params\n\t\t\tfor (var routeParamKey in routeQueryParams) {\n\t\t\t\tif (routeQueryParams.hasOwnProperty(routeParamKey)) {\n\t\t\t\t\tif (routeParams == null) {\n\t\t\t\t\t\t// The route specifies a query param but no routeParams was provided\n\t\t\t\t\t\tthrow new Error(\"Cannot route to controller '\" + ctrl.id + \"' since it's route requires the query parameter '\"\n\t\t\t\t\t\t\t\t+ routeParamKey + \"' but no routeParams was provided\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar routeParamValue = routeParams[routeParamKey];\n\t\t\t\t\t\tif (routeParamValue === undefined) {\n\t\t\t\t\t\t\t// TODO test this scenario\n\t\t\t\t\t\t\tthrow new Error(\"Cannot route to controller '\" + ctrl.id + \"' since it's route requires the query parameter '\"\n\t\t\t\t\t\t\t\t\t+ routeParamKey + \"' but the only routeParams provided are '\" + JSON.stringify(routeParams) + \"'\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnewHash = appendHashParams(newHash, routeParams);\n\n\t\t\tsetIgnoreHashChangeOnce(newHash);\n\n\t\t\trouter.setHash(newHash);\n\t\t\t//router.fire('routeload', options);\n\t\t\trouter.loadCurrentRoute(options);\n\t\t\t//}\n\t\t},\n\t\tsetHash: function (hash) {\n\t\t\twindow.location.hash = hash;\n\t\t\t//currentHash = router.getHash(); TODO this line might be required\n\t\t},\n\t\tgetHash: function () {\n\t\t\t// This method might be overkill if we support only IE9 and up\n\t\t\tvar index = window.location.href.indexOf('#');\n\t\t\tvar hash = (index == -1 ? '' : window.location.href.substr(index + 1));\n\t\t\tif (hash.indexOf('!') == 0) {\n\t\t\t\thash = hash.substr(1);\n\t\t\t}\n\t\t\treturn hash;\n\t\t},\n\t\tfindRoutesForCtrl: function (module) {\n\t\t\tvar result = [];\n\t\t\tvar moduleId = module.id;\n\t\t\tfor (var i = 0; i < routes.length; i++) {\n\n\t\t\t\tvar route = routes[i];\n\t\t\t\tif (moduleId == null || route.moduleId == null) {\n\t\t\t\t\tif (module === route.ctrl) {\n\t\t\t\t\t\tresult.push(route);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif (moduleId === route.moduleId) {\n\t\t\t\t\t\tresult.push(route);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\ttestCtrlRoute: function (routePath, viewParams) {\n\t\t\troutePath = stripLeadingSlash(routePath);\n\n\t\t\tvar routeParams = router.parseRouteParams(routePath);\n\n\t\t\tfor (var key in routeParams) {\n\t\t\t\tif (routeParams.hasOwnProperty(key)) {\n\n\t\t\t\t\tif (viewParams.hasOwnProperty(key)) {\n\t\t\t\t\t\t// The routeParam has a coresponding view parameter\n\t\t\t\t\t\t// Ensure the view parameter has a value if it is a segment parameter\n\t\t\t\t\t\tvar routeParamValue = routeParams[key];\n\t\t\t\t\t\tif (routeParamValue.segment === true) {\n\t\t\t\t\t\t\tvar viewParamValue = viewParams[key];\n\t\t\t\t\t\t\tif (viewParamValue == null || viewParamValue == '') {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If any of the routeParams is missing from the viewParams, it is not a match\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we get here all route parameters are present in view parameters and segment parameters have a value\n\t\t\treturn true;\n\t\t},\n\t\t// router.loadCurrentRoute() - Manually tell the router to load the module for the current route\n\t\tloadCurrentRoute: function (options) {\n\t\t\toptions = options || {};\n\n\t\t\tvar routeToLoad = null;\n\t\t\tfor (var i = 0; i < routes.length; i++) {\n\t\t\t\t//for (var i in routes) {\n\t\t\t\t//if (routes.hasOwnProperty(i)) {\n\t\t\t\tvar route = routes[i];\n\n\t\t\t\toptions.route = route;\n\t\t\t\t// TODO: Should speed up lookup of routes to a map?\n\t\t\t\tif (router.testRoute(options)) {\n\t\t\t\t\t// This is the first route to match the current URL\n\t\t\t\t\trouteToLoad = route;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t//}\n\t\t\t}\n\n\t\t\tif (routeToLoad == null || routeToLoad.path === '*') {\n\t\t\t\t// No route found for url, check if new route should be created\n\t\t\t\toptions.route = routeToLoad;\n\t\t\t\trouter.handleUnknownRoute(options);\n\t\t\t\treturn router;\n\t\t\t}\n\n\t\t\tif (routeToLoad != null) {\n\t\t\t\toptions.route = routeToLoad;\n\t\t\t\trouter.loadModule(options);\n\t\t\t}\n\n\t\t\treturn router;\n\t\t},\n\t\thandleUnknownRoute: function (options) {\n\n\t\t\tvar routeOrPromise = unknownRouteResolver(options.route);\n\n\t\t\tif (utils.isPromise(routeOrPromise)) {\n\n\t\t\t\trouteOrPromise.then(function (newRoute) {\n\n\t\t\t\t\toptions.route = newRoute;\n\t\t\t\t\trouter.loadUnknownRoute(options);\n\n\t\t\t\t}, function () {\n\t\t\t\t\t// Rejected. try and load the route that was found previously which is probably the '*' mapping.\n\t\t\t\t\tif (options.route != null) {\n\t\t\t\t\t\trouter.loadModule(options);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toptions.route = routeOrPromise;\n\t\t\t\trouter.loadUnknownRoute(options);\n\t\t\t}\n\t\t\treturn router;\n\t\t},\n\t\tloadUnknownRoute: function (options) {\n\t\t\toptions = options || {};\n\t\t\tif (options.route != null) {\n\t\t\t\tif (options.route.moduleId == null || options.route.path == null) {\n\t\t\t\t\tthrow new Error(\"unknownRouteResolver must return a route object with a valid moduleId and path or a promise that resolves to a route object!\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Only add unknown route if it isn't already registered. This can occur if resolveUnknownRoute() returns a known\n\t\t\t\t// route or a defaultRoute\n\t\t\t\tvar paths = router.getRoutesById()[options.route.moduleId];\n\t\t\t\tif (paths == null) {\n\t\t\t\t\toptions.route.isNew = true;\n\t\t\t\t\trouter.loadModule(options);\n\t\t\t\t} else {\n\t\t\t\t\trouter.go(options);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn router;\n\t\t},\n\t\tloadModule: function (options) {\n\t\t\toptions = options || {};\n\t\t\t// Replace router.activeRoute with this route\n\t\t\tvar route = options.route;\n\n\t\t\t// Load the route's module\n\n\t\t\tif (route.ctrl == null) {\n\n\t\t\t\trequire([route.moduleId], function (module) {\n\t\t\t\t\tif (module == null) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\trouter.processLoadedModule(options, module, route);\n\n\t\t\t\t}, function () {\n\t\t\t\t\t//console.error(arguments);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\trouter.processLoadedModule(options, route.ctrl, route);\n\n\n\t\t\t}\n\n\t\t},\n\t\t// urlPath(url) - Parses the url to get the path\n\t\t//\n\t\t// This will return the hash path if it exists or return the real path if no hash path exists.\n\t\t//\n\t\t// Example URL = 'http://domain.com/other/path?queryParam3=false#/example/path?queryParam1=true&queryParam2=example%20string'\n\t\t// path = '/example/path'\n\t\t//\n\t\t// Note: The URL must contain the protocol like 'http(s)://'\n\t\turlPath: function (url) {\n\t\t\t// Check the cache to see if we've already parsed this URL\n\t\t\tif (typeof (cachedUrlPaths[url]) !== 'undefined') {\n\t\t\t\treturn cachedUrlPaths[url];\n\t\t\t}\n\n\t\t\t// The relative URI is everything after the third slash including the third slash\n\t\t\t// Example relativeUri = '/other/path?queryParam3=false#/example/path?queryParam1=true&queryParam2=example%20string'\n\t\t\tvar splitUrl = url.split('/');\n\t\t\tvar relativeUri = '/' + splitUrl.splice(3, splitUrl.length - 3).join('/');\n\n\t\t\t// The path is everything in the relative URI up to the first ? or #\n\t\t\t// Example path = '/other/path'\n\t\t\tvar path = relativeUri.split(/[\\?#]/)[0];\n\n\t\t\t// The hash is everything from the first # up to the the search starting with ? if it exists\n\t\t\t// Example hash = '#/example/path'\n\t\t\tvar hashIndex = relativeUri.indexOf('#');\n\t\t\tvar isHashEmpty = hashIndex === relativeUri.length - 1;\n\n\t\t\tif (hashIndex !== -1 && !isHashEmpty) {\n\t\t\t\tvar hash = relativeUri.substring(hashIndex).split('?')[0];\n\t\t\t\tif (hash.substring(0, 2) === '#!') {\n\t\t\t\t\t// Hashbang path\n\t\t\t\t\tpath = hash.substring(2);\n\t\t\t\t} else {\n\t\t\t\t\t// Hash path\n\t\t\t\t\tpath = hash.substring(1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Cache the path for this URL\n\t\t\tcachedUrlPaths[url] = path;\n\n\t\t\treturn path;\n\t\t},\n\t\tprocessLoadedModule: function (options, module, route) {\n\t\t\trouter.activeRoute.active = false;\n\t\t\troute.active = true;\n\t\t\trouter.activeRoute = route;\n\n\t\t\t// Register newly discovered routes\n\t\t\tif (route.isNew) {\n\t\t\t\tdelete route.isNew;\n\t\t\t\trouter.addRouteAt(0, route);\n\t\t\t}\n\t\t\t// Make sure this is still the active route from when loadCurrentRoute was called. The asynchronous nature\n\t\t\t// of AMD loaders means we could have fireed multiple hashchanges or popstates before the AMD module finished\n\t\t\t// loading. If we navigate to route /a then navigate to route /b but /b finishes loading before /a we don't\n\t\t\t// want /a to be rendered since we're actually at route /b.\n\t\t\tif (route.active) {\n\n\t\t\t\t// Check if routeParams has been cached for this request, otherwise cache it for this request in the options\n\t\t\t\tvar urlParams = options.urlParams;\n\t\t\t\tif (urlParams == null) {\n\t\t\t\t\turlParams = router.routeArguments(route, window.location.href);\n\t\t\t\t\toptions.urlParams = urlParams;\n\t\t\t\t}\n\n\t\t\t\tvar routerOptions = $.extend({}, options);\n\t\t\t\trouterOptions.routeParams = urlParams;\n\t\t\t\trouterOptions.module = module;\n\t\t\t\trouterOptions.route = route;\n\n\t\t\t\trouter.fire('routeload', routerOptions);\n\t\t\t}\n\t\t},\n\t\t// router.testRoute(route, [url]) - Test if the route matches the current URL\n\t\t//\n\t\t// This algorithm tries to fail or succeed as quickly as possible for the most common cases.\n\t\ttestRoute: function (options) {\n\n\t\t\t// Example path = '/example/path'\n\t\t\t// Example route: `exampleRoute: {path: '/example/*', moduleId: 'example/exampleView'}`\n\t\t\tvar urlPath = router.urlPath(options.url || window.location.href);\n\t\t\turlPath = stripLeadingSlash(urlPath);\n\n\t\t\tvar routePath = options.route.path;\n\t\t\troutePath = stripLeadingSlash(routePath);\n\n\t\t\t// If the path is an exact match then the route is a match\n\t\t\tif (routePath === urlPath) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// If the path is '*' then the route is a match\n\t\t\tif (routePath === '*') {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Test if it's a regular expression\n\t\t\tif (routePath instanceof RegExp) {\n\t\t\t\treturn routePath.test(urlPath);\n\t\t\t}\n\n\t\t\t// Look for wildcards\n\t\t\tif (routePath.indexOf('*') === -1 && routePath.indexOf(':') === -1 && routePath.indexOf('?') === -1) {\n\t\t\t\t// No wildcards or parameters and we already made sure it wasn't an exact match so the test fails\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Example pathSegments = ['', example', 'path']\n\t\t\tvar urlPathSegments = urlPath.split('/');\n\n\t\t\t// Chop off any query parameters (everything after and including ?) from the routePath\n\t\t\tvar routePathQuestionIndex = routePath.indexOf('?');\n\t\t\t// Check if there is a ? but that the ? is not the last character\n\t\t\tif (routePathQuestionIndex !== -1 && routePathQuestionIndex !== routePath.length - 1) {\n\t\t\t\troutePath = routePath.substr(0, routePathQuestionIndex);\n\t\t\t}\n\n\t\t\t// Example routePathSegments = ['', 'example', '*']\n\t\t\tvar routePathSegments = routePath.split('/');\n\n\t\t\t// There must be the same number of path segments or it isn't a match\n\t\t\tif (urlPathSegments.length !== routePathSegments.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check equality of each path segment\n\t\t\tfor (var key in routePathSegments) {\n\t\t\t\tif (routePathSegments.hasOwnProperty(key)) {\n\t\t\t\t\t// The path segments must be equal, be a wildcard segment '*', or be a path parameter like ':id'\n\t\t\t\t\tvar routePathSegment = routePathSegments[key];\n\t\t\t\t\tvar urlPathSegment = urlPathSegments[key];\n\n\t\t\t\t\t// Check if routePathSegment is the same string as the urlPathSegment or the routePathSegment is a wildcard or parameter\n\t\t\t\t\tif (routePathSegment === '*' || routePathSegment.charAt(0) === ':') {\n\t\t\t\t\t\t// This is a valid segment\n\n\t\t\t\t\t\t// Ensure the url has a valid value for the matching segment\n\t\t\t\t\t\t// Ensure value is not null or empty\n\t\t\t\t\t\tif (urlPathSegment == null || urlPathSegment === '') {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// continue and check the other segments\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (routePathSegment !== urlPathSegment) {\n\t\t\t\t\t\t\t// Not a valid segment so the url does not match the route\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we get here the url path segments matches the route path segments. Next we check the query parameters, if there are any\n\t\t\tif (routePathQuestionIndex !== -1) {\n\t\t\t\tvar tmpRoutePath = options.route.path;\n\t\t\t\ttmpRoutePath = stripLeadingSlash(tmpRoutePath);\n\t\t\t\tvar routeQueryParamsStr = tmpRoutePath.substr(routePathQuestionIndex + 1);\n\n\t\t\t\tvar routeParams = router.parseRouteQueryParams(routeQueryParamsStr);\n\n\t\t\t\t// The url path segments match but the route also specifies query params we need to check\n\n\t\t\t\t// Extract params from url\n\t\t\t\tif (options.urlParams == null) {\n\t\t\t\t\tvar tempParams = router.routeArguments(options.route, window.location.href);\n\t\t\t\t\toptions.urlParams = tempParams;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in routeParams) {\n\t\t\t\t\tif (routeParams.hasOwnProperty(key)) {\n\t\t\t\t\t\tvar urlParamValue = options.urlParams[key];\n\n\t\t\t\t\t\tif (urlParamValue == null) {\n\t\t\t\t\t\t\t// There is no parameter in the url for the routeParameter so we do not have a match\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Nothing failed. The route matches the URL.\n\t\t\treturn true;\n\t\t},\n\t\t// router.routeArguments([route, [url]]) - Gets the path variables and query parameter values from the URL\n\t\t//\n\t\t// Both parameters are optional.\n\t\trouteArguments: function (route, url) {\n\n\t\t\t/*\n\t\t\t var cacheResult = getCachedRouteArguments(route, url);\n\t\t\t if (cacheResult != null) {\n\t\t\t \n\t\t\t return cacheResult;\n\t\t\t }*/\n\n\t\t\t//argumentsCache[];\n\t\t\tif (!route)\n\t\t\t\troute = router.activeRoute;\n\t\t\tif (!url)\n\t\t\t\turl = window.location.href;\n\t\t\tvar args = {};\n\t\t\tvar urlPath = router.urlPath(url);\n\t\t\turlPath = stripLeadingSlash(urlPath);\n\n\t\t\t// Example pathSegments = ['', example', 'path']\n\t\t\tvar urlPathSegments = urlPath.split('/');\n\n\t\t\t// Example routePathSegments = ['', 'example', '*']\n\t\t\tvar routePathSegments = [];\n\t\t\tif (route && route.path && !(route.path instanceof RegExp)) {\n\t\t\t\tvar routePath = route.path;\n\t\t\t\troutePath = stripLeadingSlash(routePath);\n\t\t\t\troutePathSegments = routePath.split('/');\n\t\t\t}\n\n\t\t\t// Get path variables\n\t\t\t// URL '/customer/123'\n\t\t\t// and route `{path: '/customer/:id'}`\n\t\t\t// gets id = '123'\n\t\t\tfor (var routeSegmentIndex in routePathSegments) {\n\t\t\t\tif (routePathSegments.hasOwnProperty(routeSegmentIndex)) {\n\t\t\t\t\tvar routeSegment = routePathSegments[routeSegmentIndex];\n\t\t\t\t\tif (routeSegment.charAt(0) === ':') {\n\t\t\t\t\t\trouteSegment = routeSegment.substring(1);\n\t\t\t\t\t\t// Strip everything after and including ? if present\n\t\t\t\t\t\tvar questionmarkIndex = routeSegment.indexOf('?');\n\t\t\t\t\t\tif (questionmarkIndex !== -1) {\n\t\t\t\t\t\t\trouteSegment = routeSegment.substr(0, questionmarkIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t\targs[routeSegment] = urlPathSegments[routeSegmentIndex];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//get query string\n\t\t\tvar search = router.queryString(url);\n\t\t\tvar queryParams = router.queryParamsFromSearchString(search);\n\t\t\tfor (var param in queryParams) {\n\t\t\t\tif (queryParams.hasOwnProperty(param)) {\n\t\t\t\t\targs[param] = queryParams[param];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Parse the arguments into unescaped strings, numbers, or booleans\n\t\t\targs = router.parseArguments(args);\n\n\t\t\t//setCachedRouteArguments(route, url, args);\n\t\t\treturn args;\n\t\t},\n\t\tqueryString: function (url) {\n\t\t\t// Get the query string from the url\n\t\t\t// The query string is the query parameters excluding the leading '?'\n\t\t\tvar searchIndex = url.indexOf('?');\n\t\t\tvar search = '';\n\t\t\tif (searchIndex !== -1) {\n\t\t\t\tsearch = url.substring(searchIndex + 1);\n\t\t\t\tvar hashIndex = search.indexOf('#');\n\t\t\t\tif (hashIndex !== -1) {\n\t\t\t\t\tsearch = search.substring(0, hashIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// TODO only check url once to extract params, not twice once for url and again for hash\n\t\t\t// If it's a hash URL we need to get the search from the hash\n\t\t\tvar hashPathIndex = url.indexOf('#');\n\t\t\tvar hashBangPathIndex = url.indexOf('#!');\n\t\t\tif (hashPathIndex !== -1 || hashBangPathIndex !== -1) {\n\t\t\t\tvar hash = '';\n\t\t\t\tif (hashPathIndex !== -1) {\n\t\t\t\t\thash = url.substring(hashPathIndex);\n\t\t\t\t} else {\n\t\t\t\t\thash = url.substring(hashBangPathIndex);\n\t\t\t\t}\n\t\t\t\tsearchIndex = hash.indexOf('?');\n\t\t\t\tif (searchIndex !== -1) {\n\t\t\t\t\tsearch = hash.substring(searchIndex + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn search;\n\t\t},\n\t\tqueryParams: function (url) {\n\t\t\tvar search = router.queryString(url);\n\t\t\tvar queryParams = router.queryParamsFromSearchString(search);\n\t\t\treturn queryParams;\n\t\t},\n\t\tqueryParamsFromSearchString: function (search) {\n\t\t\tvar params = {};\n\t\t\tvar queryParameters = search.split('&');\n\t\t\t// split() on an empty string has a strange behavior of returning [''] instead of []\n\t\t\tif (queryParameters.length === 1 && queryParameters[0] === '') {\n\t\t\t\tqueryParameters = [];\n\t\t\t}\n\t\t\tfor (var i in queryParameters) {\n\t\t\t\tif (queryParameters.hasOwnProperty(i)) {\n\t\t\t\t\tvar queryParameter = queryParameters[i];\n\t\t\t\t\tvar queryParameterParts = queryParameter.split('=');\n\t\t\t\t\tvar value = queryParameterParts.splice(1, queryParameterParts.length - 1).join('=');\n\t\t\t\t\tparams[queryParameterParts[0]] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\tparseArguments: function (args) {\n\t\t\tfor (var arg in args) {\n\t\t\t\tvar value = args[arg];\n\t\t\t\tif (value === 'true') {\n\t\t\t\t\targs[arg] = true;\n\t\t\t\t} else if (value === 'false') {\n\t\t\t\t\targs[arg] = false;\n\t\t\t\t} else if (!isNaN(value) && value !== '' && value.charAt(0) !== '0') {\n\t\t\t\t\t// numeric\n\t\t\t\t\targs[arg] = +value;\n\t\t\t\t} else {\n\t\t\t\t\t// string\n\t\t\t\t\targs[arg] = decodeURIComponent(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn args;\n\t\t},\n\t\tparseRouteQueryParams: function (routerQueryParams) {\n\n\t\t\tvar hit = cachedRouterQueryParams[routerQueryParams];\n\t\t\tif (hit != null) {\n\t\t\t\treturn hit;\n\t\t\t}\n\n\t\t\tvar routeParams = {};\n\t\t\tvar routeQueryParameters = routerQueryParams.split('&');\n\t\t\t// split() on an empty string has a strange behavior of returning [''] instead of []\n\t\t\tif (routeQueryParameters.length === 1 && routeQueryParameters[0] === '') {\n\t\t\t\trouteQueryParameters = [];\n\t\t\t}\n\t\t\tfor (var key in routeQueryParameters) {\n\t\t\t\tif (routeQueryParameters.hasOwnProperty(key)) {\n\t\t\t\t\tvar routeQueryParameter = routeQueryParameters[key];\n\t\t\t\t\trouteParams[routeQueryParameter] = {query: true};\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Cache result\n\t\t\tcachedRouterQueryParams[routerQueryParams] = routeParams;\n\n\t\t\treturn routeParams;\n\t\t},\n\t\tparseRouteParams: function (path) {\n\t\t\tvar hit = cachedRouterParams[path];\n\t\t\tif (hit != null) {\n\t\t\t\treturn hit;\n\t\t\t}\n\n\t\t\tvar routePath = path;\n\t\t\tvar routeParams = {};\n\n\t\t\tif (routePath == null || routePath == '') {\n\t\t\t\treturn routeParams;\n\t\t\t}\n\n\t\t\t// Test if it's a regular expression\n\t\t\tif (routePath instanceof RegExp) {\n\t\t\t\troutePath = routePath.toString();\n\t\t\t\t// Remove slashes from beginning and end\n\t\t\t\troutePath = routePath.substring(1, routePath.length - 1);\n\t\t\t}\n\n\n\t\t\tif (routePath.indexOf(':') === -1 && routePath.indexOf('?') !== -1) {\n\t\t\t\t// No parameters in routePath\n\t\t\t\tcachedRouterParams[path] = routeParams;\n\t\t\t\treturn routeParams;\n\t\t\t}\n\n\t\t\t// Chop off any query parameters (everything after and including ?) from the routePath\n\t\t\tvar routePathQuestionIndex = routePath.indexOf('?');\n\t\t\t// Check if there is a ? but that the ? is not the last character\n\t\t\tif (routePathQuestionIndex !== -1 && routePathQuestionIndex !== routePath.length - 1) {\n\t\t\t\t// Remove query parms\n\t\t\t\troutePath = routePath.substr(0, routePathQuestionIndex);\n\t\t\t}\n\n\t\t\t// Parse segment parameters eg ':id'\n\t\t\t// Example routePathSegments = ['foo', 'bar', ':id', '']\n\t\t\tvar routePathSegments = routePath.split('/');\n\n\t\t\tfor (var key in routePathSegments) {\n\t\t\t\tif (routePathSegments.hasOwnProperty(key)) {\n\t\t\t\t\t// The path segments must be equal, be a wildcard segment '*', or be a path parameter like ':id'\n\t\t\t\t\tvar routePathSegment = routePathSegments[key];\n\n\t\t\t\t\t// Check if routePathSegment is a segment dparameter\n\t\t\t\t\tif (routePathSegment.charAt(0) === ':') {\n\t\t\t\t\t\tvar param = routePathSegment.slice(1);\n\t\t\t\t\t\trouteParams[param] = {segment: true};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Parse query string parameters eg ?id&name\n\t\t\tif (routePathQuestionIndex !== -1) {\n\t\t\t\tvar routeQueryParamsStr = path.substr(routePathQuestionIndex + 1);\n\n\t\t\t\tvar routeQueryParams = router.parseRouteQueryParams(routeQueryParamsStr);\n\t\t\t\trouteParams = $.extend(routeParams, routeQueryParams);\n\t\t\t}\n\t\t\tcachedRouterParams[path] = routeParams;\n\t\t\treturn routeParams;\n\t\t},\n\t\thashPath: function (hash) {\n\t\t\t// Remove leading #\n\t\t\tif (hash.indexOf('#') === 0) {\n\t\t\t\thash = hash.substring(1);\n\t\t\t}\n\n\t\t\t// Remove everything after the ?\n\t\t\tvar idx = hash.indexOf('?');\n\t\t\tif (idx >= 0) {\n\t\t\t\thash = hash.substring(0, idx);\n\t\t\t}\n\n\t\t\treturn hash;\n\t\t}\n\t};\n\n\tfunction resolveUnknownRoutes() {\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\n\t\tvar hashIndex = window.location.href.indexOf('#');\n\n\t\tif (hashIndex === -1 || hashIndex === location.href.length - 1) {\n\t\t\t// no hash found or hash is at end of url and no hash part is available, so use default view\n\t\t\tif (defaultRoute == null) {\n\t\t\t\tthrow new Error(\"Couldn't resolve the url, \" + location.href + \", to a route. Please set the option 'kudu.defaultRoute' to render a default page!\");\n\t\t\t}\n\t\t\tdeferred.resolve(defaultRoute);// TODO update hash\n\t\t\treturn promise;\n\t\t}\n\n\t\tvar path = router.urlPath(window.location.href);\n\t\tpath = stripLeadingSlash(path);\n\n\t\t/*\n\t\t if (path.indexOf(\"/\") === 0) {\n\t\t path = path.substr(1);\n\t\t }*/\n\n\t\trequire([path], function (module) {\n\t\t\tif (module == null) {\n\t\t\t\tdeferred.reject();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newRoute = {\n\t\t\t\tpath: path,\n\t\t\t\tctrl: module,\n\t\t\t\tmoduleId: path\n\t\t\t};\n\t\t\tdeferred.resolve(newRoute);\n\n\t\t}, function () {\n\t\t\tdeferred.reject();\n\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tfunction appendHashParams(hash, params) {\n\n\t\tif (params != null) {\n\t\t\tvar paramStr = $.param(params, true);\n\n\t\t\tif (paramStr.length > 0) {\n\n\t\t\t\tif (hash.indexOf('?') === -1) {\n\t\t\t\t\t// No existing parameters\n\t\t\t\t\thash = hash + '?' + paramStr;\n\n\t\t\t\t} else {\n\t\t\t\t\t// There are existing parameters\n\t\t\t\t\thash = hash + '&' + paramStr;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\treturn hash;\n\t}\n\n\tfunction stripLeadingSlash(str) {\n\t\tif (typeof str === \"string\") {\n\t\t\tif (str.indexOf(\"/\") === 0) {\n\t\t\t\treturn str.slice(1);\n\t\t\t}\n\t\t}\n\t\treturn str;\n\t}\n\n\tfunction setIgnoreHashChangeOnce(newHash) {\n\t\tif (currentHash != newHash) {\n\t\t\tignoreHashChangeOnce = true;\n\t\t}\n\t}\n\n\tfunction appendUrlSegment(url, segment) {\n\t\tif (url.length > 0 && url !== '/') {\n\t\t\turl = url + '/';\n\t\t}\n\t\tif (segment.length == 0) {\n\t\t\tsegment = \"/\";\n\t\t}\n\t\turl = url + segment;\n\t\treturn url;\n\t}\n\n\t// Return the router\n\treturn router;\n});\n","define('utils/ajaxTracker',['require','jquery','./utils'],function (require) {\r\n\r\n\tvar $ = require(\"jquery\");\r\n\tvar utils = require(\"./utils\");\r\n\r\n\tfunction ajaxTracker(kudu) {\r\n\r\n\t\tif (kudu == null) {\r\n\t\t\tthrow new Error(\"ajaxTracker requires a kudu instance!\");\r\n\t\t}\r\n\r\n\t\tvar that = {};\r\n\t\tvar idCounter = 0;\r\n\t\tvar promiseCounter = 0;\r\n\r\n\t\tvar promisesMap = {};\r\n\t\tvar globalPromise = null;\r\n\t\t//var globalPromiseArgs = {};\r\n\r\n\t\tthat.add = function (target, promise, args) {\r\n\t\t\t\r\n\t\t\tif (typeof promise.abort !== 'function') {\r\n\t\t\t\tthrow new Error(\"ajaxTracker.add(promise) requires an 'abort' function for when views are cancelled!\");\r\n\t\t\t}\r\n\r\n\t\t\tvar promisesArray = promisesMap[target];\r\n\t\t\tif (promisesArray == null) {\r\n\t\t\t\tpromisesArray = [];\r\n\t\t\t\tpromisesMap[target] = promisesArray;\r\n\t\t\t}\r\n\r\n\t\t\tvar item = {promise: promise, args: args};\r\n\t\t\tpromisesArray.push(item);\r\n\r\n\t\t\tvar triggerOptions = {\r\n\t\t\t\tjqXHR: promise,\r\n\t\t\t\targs: args\r\n\t\t\t};\r\n\t\t\tif (globalPromise == null) {\r\n\t\t\t\tglobalPromise = $.when(promise);\r\n\t\t\t\t/*\r\n\t\t\t\t if (args != null) {\r\n\t\t\t\t globalPromiseArgs = $.extend({}, args);\r\n\t\t\t\t }*/\r\n\r\n\t\t\t\t$(kudu).trigger(\"global.ajax.start\", [triggerOptions]);\r\n\t\t\t\ttriggerOptions.args = args;\r\n\t\t\t\t$(kudu).trigger(\"ajax.start\", [triggerOptions]);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tglobalPromise = $.when(globalPromise, promise);\r\n\t\t\t\t/*\r\n\t\t\t\t if (args != null) {\r\n\t\t\t\t globalPromiseArgs = $.extend(globalPromiseArgs, args);\r\n\t\t\t\t }*/\r\n\t\t\t\ttriggerOptions.args = args;\r\n\t\t\t\t$(kudu).trigger(\"ajax.start\", [triggerOptions]);\r\n\t\t\t}\r\n\t\t\tglobalPromise._id = idCounter++;\r\n\r\n\t\t\taddListeners(target, globalPromise, promise, args);\r\n\t\t\t//console.log(\"DONE registering\", globalPromise._id);\r\n\r\n\t\t\tpromiseCounter++;\r\n\r\n\t\t\treturn globalPromise;\r\n\t\t};\r\n\r\n\t\tthat.remove = function (target, promise) {\r\n\t\t\tvar jqpromiseArray = promisesMap[target];\r\n\t\t\tif (jqpromiseArray == null) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar index = -1;\r\n\t\t\tfor (var i = 0; i < jqpromiseArray.length; i++) {\r\n\t\t\t\tvar item = jqpromiseArray[i];\r\n\t\t\t\tif (item.promise === promise) {\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\tjqpromiseArray.splice(index, 1);\r\n\t\t\t\tif (jqpromiseArray.length === 0) {\r\n\t\t\t\t\tdelete promisesMap[target];\r\n\t\t\t\t}\r\n\t\t\t\tpromiseCounter--;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tthat.clear = function (target) {\r\n\t\t\tif (arguments.length === 0) {\r\n\t\t\t\tpromisesMap = {};\r\n\r\n\t\t\t} else {\r\n\t\t\t\tdelete promisesMap[target];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthat.abort = function (target) {\r\n\t\t\tif (arguments.length === 0) {\r\n\t\t\t\tfor (var key in promisesMap) {\r\n\t\t\t\t\tif (promisesMap.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tvar promisesArray = promisesMap[key];\r\n\t\t\t\t\t\tabortItems(promisesArray);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tabortItems(promisesArray);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar promisesArray = promisesMap[target];\r\n\t\t\tif (promisesArray == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tabortItems(promisesArray);\r\n\t\t};\r\n\r\n\t\tfunction abortItems(promisesArray) {\r\n\t\t\t// promiseArray could be manipulated outside the loop below, so we make a copy\r\n\t\t\tvar promisesCopy = promisesArray.slice();\r\n\t\t\t$.each(promisesCopy, function (index, item) {\r\n\t\t\t\titem.promise.abort();\r\n\t\t\t});\r\n\t\t\tglobalPromise = null;\r\n\t\t\t//globalPromiseArgs = {};\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction addListeners(target, globalPromiseParam, promiseParam, args) {\r\n\r\n\t\t\tpromiseParam.then(function (data, status, jqXHR) {\r\n\r\n\t\t\t\tvar triggerOptions;\r\n\r\n\t\t\t\tif (isXhr(jqXHR)) {\r\n\t\t\t\t\ttriggerOptions = {data: data, status: status, jqXHR: jqXHR, args: args};\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar promiseArgs;\r\n\t\t\t\t\tif (arguments.length > 0) {\r\n\t\t\t\t\t\tpromiseArgs = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttriggerOptions = {data: null, status: null, jqXHR: null, error: null, args: args, promiseArgs: promiseArgs};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(kudu).trigger(\"ajax.success\", [triggerOptions]);\r\n\r\n\t\t\t}, function (jqXHR, status, error) {\r\n\r\n\t\t\t\tvar triggerOptions;\r\n\r\n\t\t\t\tif (isXhr(jqXHR)) {\r\n\t\t\t\t\tvar triggerOptions = {error: error, status: status, jqXHR: jqXHR, args: args};\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar promiseArgs;\r\n\t\t\t\t\tif (arguments.length > 0) {\r\n\t\t\t\t\t\tpromiseArgs = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttriggerOptions = {data: null, status: null, jqXHR: null, error: null, args: args, promiseArgs: promiseArgs};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(kudu).trigger(\"ajax.error\", [triggerOptions]);\r\n\t\t\t});\r\n\r\n\t\t\tpromiseParam.always(function (dataOrjqXHR, status, errorOrjqXHR) {\r\n\t\t\t\t// Note: the promise might not be an ajax request at all!\r\n\r\n\t\t\t\tvar triggerOptions;\r\n\r\n\t\t\t\tif (isXhr(dataOrjqXHR)) {\r\n\t\t\t\t\ttriggerOptions = {data: dataOrjqXHR, status: status, jqXHR: errorOrjqXHR, error: null, args: args};\r\n\r\n\t\t\t\t} else if (isXhr(errorOrjqXHR)) {\r\n\t\t\t\t\ttriggerOptions = {data: null, status: status, jqXHR: dataOrjqXHR, error: errorOrjqXHR, args: args};\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar promiseArgs;\r\n\t\t\t\t\tif (arguments.length > 0) {\r\n\t\t\t\t\t\tpromiseArgs = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttriggerOptions = {data: null, status: null, jqXHR: null, error: null, args: args, promiseArgs: promiseArgs};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(kudu).trigger(\"ajax.complete\", [triggerOptions]);\r\n\t\t\t\tvar removed = that.remove(target, promiseParam);\r\n\t\t\t\t//console.log(\"Removed?\", removed);\r\n\t\t\t});\r\n\r\n\t\t\tglobalPromiseParam.then(function (data, status, jqXHR) {\r\n\r\n\t\t\t\tvar triggerOptions;\r\n\r\n\t\t\t\tif (isXhr(jqXHR)) {\r\n\t\t\t\t\ttriggerOptions = {data: data, status: status, jqXHR: jqXHR, args: args};\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar promiseArgs;\r\n\t\t\t\t\tif (arguments.length > 0) {\r\n\t\t\t\t\t\tpromiseArgs = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttriggerOptions = {data: null, status: null, jqXHR: null, error: null, args: args, promiseArgs: promiseArgs};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Only process if this is the globalPromise, otherwise globalPromise has been overwritten\r\n\t\t\t\tif (globalPromise == null || globalPromise == globalPromiseParam) {\r\n\r\n\t\t\t\t\t$(kudu).trigger(\"ajax.stop\", [triggerOptions]);\r\n\r\n\t\t\t\t\tdelete triggerOptions.args;\r\n\t\t\t\t\t$(kudu).trigger(\"global.ajax.stop\", [triggerOptions]);\r\n\t\t\t\t\tglobalPromise = null;\r\n\t\t\t\t\t//globalPromiseArgs = {};\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//console.log(\"globalPromise ignore then\");\r\n\t\t\t\t\t$(kudu).trigger(\"ajax.stop\", [triggerOptions]);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, function (jqXHR, status, error) {\r\n\r\n\t\t\t\tvar triggerOptions;\r\n\r\n\t\t\t\tif (isXhr(jqXHR)) {\r\n\t\t\t\t\ttriggerOptions = {error: error, status: status, jqXHR: jqXHR, args: args};\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar promiseArgs;\r\n\t\t\t\t\tif (arguments.length > 0) {\r\n\t\t\t\t\t\tpromiseArgs = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttriggerOptions = {data: null, status: null, jqXHR: null, error: null, args: args, promiseArgs: promiseArgs};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (globalPromise == null || globalPromise == globalPromiseParam) {\r\n\r\n\t\t\t\t\t$(kudu).trigger(\"ajax.stop\", [triggerOptions]);\r\n\r\n\t\t\t\t\tdelete triggerOptions.args;\r\n\t\t\t\t\t$(kudu).trigger(\"global.ajax.stop\", [triggerOptions]);\r\n\t\t\t\t\tglobalPromise = null;\r\n\t\t\t\t\t//globalPromiseArgs = {};\r\n\t\t\t\t\t//console.log(\"globalPromise ERROR\", globalPromiseParam);\r\n\t\t\t\t\t//console.log(arguments);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//console.log(\"globalPromise ignore error\");\r\n\t\t\t\t\t$(kudu).trigger(\"ajax.stop\", [triggerOptions]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tglobalPromiseParam.always(function () {\r\n\r\n\t\t\t\tif (globalPromise == null || globalPromise == globalPromiseParam) {\r\n\t\t\t\t\t//console.log(\"globalPromise ALWAYS\", arguments);\r\n\t\t\t\t\t//console.log(\"Promises size1:\", utils.objectLength(jqXHRMap));\r\n\t\t\t\t\t//console.log(\"Promises size2:\", promiseCounter);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//console.log(\"globalPromise ignore always\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction isXhr(xhr) {\r\n\t\t\tif (xhr != null) {\r\n\t\t\t\tif (typeof xhr.getAllResponseHeaders === 'function' && typeof xhr.abort === 'function') {\r\n\t\t\t\t\t// assume dataOrjqXHR is a jqXHR and thus an Ajax request\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn that;\r\n\t}\r\n\r\n\treturn ajaxTracker;\r\n});\n","define('utils/simpleAjaxTracker',['require'],function (require) {\n\n\tvar simpleAjaxTracker = {};\n\n\tsimpleAjaxTracker.create = function (ajaxTracker, options) {\n\t\tvar adaptor = {\n\t\t\tadd: function (jqXhr, args) {\n\t\t\t\tajaxTracker.add(options.target, jqXhr, args);\n\t\t\t},\n\t\t\tremove: function (jqXhr) {\n\t\t\t\tajaxTracker.remove(options.target, jqXhr);\n\t\t\t},\n\t\t\tabort: function () {\n\t\t\t\tajaxTracker.abort(options.target);\n\t\t\t}\n\t\t};\n\n\t\treturn adaptor;\n\t};\n\n\treturn simpleAjaxTracker;\n});\n\n","define('lifecycle/onInitHandler',['require','jquery'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\n\tfunction onInitHandler(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\n\t\tif (typeof options.ctrl.onInit !== 'function') {\n\t\t\tdeferred.reject(\"Controllers *must* implement an onInit method that returns either a Ractive function or a promise that resolves to a Ractive function!\");\n\t\t\treturn promise;\n\t\t}\n\n\t\tvar viewOptions = {\n\t\t\tctrl: options.ctrl,\n\t\t\troute: options.route,\n\t\t\trouteParams: options.routeParams,\n\t\t\targs: options.args,\n\t\t\tajaxTracker: options.ajaxTracker,\n\t\t\tprev: options.prev\n\t\t};\n\n\t\tvar ractiveFnOrPromise = options.ctrl.onInit(viewOptions);\n\n\t\tdeferred.resolve(ractiveFnOrPromise);\n\n\t\t/*\n\t\t if (options.createView) {\n\t\t promise = options.createView(options);\n\t\t } else {\n\t\t promise = createView(options);\n\t\t }*/\n\n\t\treturn promise;\n\t}\n\n\treturn onInitHandler;\n});\n","define('lifecycle/onRemoveHandler',['require','jquery','../utils/utils'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\tvar utils = require(\"../utils/utils\");\n\n\tfunction onRemoveHandler(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\n\t\tif (typeof options.ctrl.onRemove !== 'function') {\n\t\t\tdeferred.resolve();\n\t\t\treturn promise;\n\t\t}\n\n\t\tvar viewOptions = {\n\t\t\tctrl: options.ctrl,\n\t\t\troute: options.route,\n\t\t\trouteParams: options.routeParams,\n\t\t\targs: options.args,\n\t\t\tview: options.view,\n\t\t\tajaxTracker: options.ajaxTracker,\n\t\t\tnext: options.next\n\t\t};\n\n\t\tvar booleanOrPromise = options.ctrl.onRemove(viewOptions);\n\n\t\tif (booleanOrPromise == null || booleanOrPromise == true) {\n\t\t\tdeferred.resolve();\n\t\t\treturn promise;\n\t\t}\n\n\t\tif (booleanOrPromise == false) {\n\t\t\tdeferred.reject(\"controller \" + \"onRemove returned false\");\n\t\t\treturn promise;\n\t\t}\n\n\t\tif (utils.isPromise(booleanOrPromise)) {\n\t\t\tbooleanOrPromise.then(function (bool) {\n\n\t\t\t\t// Request could have been overwritten by new request. Ensure this is still the active request\n\t\t\t\tif (!options.mvc.requestTracker.active) {\n\t\t\t\t\tdeferred.reject(\"Request overwritten by another view request\");\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\tif (bool == null || bool == true) {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.reject();\n\t\t\t\t}\n\t\t\t}, function () {\n\t\t\t\t// onRemove promise rejected\n\t\t\t\tdeferred.reject();\n\n\t\t\t});\n\n\t\t} else {\n\t\t\tconsole.warn(\"Ignoring new view since onRemove did not return a valid response. onRemove must return either true/false or a promise that resolves to true/false.\");\n\t\t\tdeferred.reject();\n\t\t}\n\t\treturn promise;\n\t}\n\n\treturn onRemoveHandler;\n});\n","define('ractivelib/setupEvents',['require','jquery'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\n\tfunction setupEvents(options) {\n\t\t// Guard against if view is not a ractive instance\n\t\tif (!options.view.off) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\tvar triggerOptions = {\n\t\t\trouteParams: options.routeParams,\n\t\t\targs: options.args,\n\t\t\tview: options.view,\n\t\t\tctrl: options.ctrl,\n\t\t\tajaxTracker: options.ajaxTracker,\n\t\t\tmvc: options.mvc\n\t\t};\n\n\t\tvar viewOptions = {\n\t\t\trouteParams: options.routeParams,\n\t\t\targs: options.args,\n\t\t\tview: options.view,\n\t\t\tajaxTracker: options.ajaxTracker\n\t\t};*/\n\n\t\t// Add callback events\n\t\toptions.view.off('complete');\n\t\toptions.view.off('render');\n\t\toptions.view.off('unrender');\n\t\toptions.view.off('teardown');\n\n\t\toptions.view.on('complete', function () {\n\t\t\t// switch on transitions that was disabled in kudu during rendering of the view.\n\t\t\tthis.transitionsEnabled = true;\n\t\t\t/*\n\t\t\tif (typeof options.ctrl.onComplete == 'function') {\n\t\t\t\toptions.ctrl.onComplete(viewOptions);\n\t\t\t}*/\n\t\t\t//options.kudu.triggerEvent(\"complete\", triggerOptions);\n\t\t});\n\n\t\toptions.view.on('render', function () {\n\t\t\t//console.log(\"onrender\");\n\t\t\t/*\n\t\t\tif (typeof options.ctrl.onRender == 'function') {\n\t\t\t\toptions.ctrl.onRender(viewOptions);\n\t\t\t}*/\n\t\t\t//options.kudu.triggerEvent(\"render\", triggerOptions);\n\t\t});\n\n\t\toptions.view.on('unrender', function () {\n\t\t\t/*\n\t\t}\n\t\t\tif (typeof options.ctrl.onUnrender == 'function') {\n\t\t\t\toptions.ctrl.onUnrender(viewOptions);\n\t\t\t}\n\t\t\toptions.kudu.triggerEvent(\"unrender\", triggerOptions);\n\t\t\t*/\n\t\t});\n\n\t\toptions.view.on('teardown', function () {\n\t\t\t//console.log(\"onteardown\");\n\t\t\t//options.kudu.triggerEvent(\"teardown\", triggerOptions);\n\t\t});\n\n\t\tvar that = {};\n\n\n\n\t\treturn that;\n\t}\n\treturn setupEvents;\n});\n","define('ractivelib/setupDefaultEvents',['require','jquery','ractive'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\tvar Ractive = require(\"ractive\");\n\n\tfunction setupDefaultEvents(options) {\n\t\tRactive.defaults.onconstruct = function () {\n\t\t\t//console.error(\"OK\", this);\n\t\t};\n\n\t\tvar that = {};\n\n\t\treturn that;\n\t}\n\treturn setupDefaultEvents;\n});\n","define('transition/fade',['require','jquery'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\n\tfunction fade() {\n\n\t\tvar that = {};\n\n\t\tthat.intro = function (options, done) {\n\t\t\tvar target = options.target;\n\n\t\t\tif (target == null) {\n\t\t\t\tthrow new Error(\"options.target is not defined!\");\n\t\t\t}\n\n\t\t\tvar duration = options.duration || 'fast';\n\n\t\t\tif (options.firstView) {\n\t\t\t\tduration = 0;\n\t\t\t}\n\n\t\t\t$(options.target).fadeIn(duration, function () {\n\t\t\t\tdone();\n\t\t\t});\n\t\t};\n\n\t\tthat.outro = function (options, done) {\n\t\t\tvar target = options.target;\n\n\t\t\tif (target == null) {\n\t\t\t\tthrow new Error(\"options.target is not defined!\");\n\t\t\t}\n\n\t\t\tvar duration = options.duration || 'fast';\n\n\t\t\tif (options.firstView) {\n\t\t\t\tduration = 0;\n\t\t\t}\n\n\t\t\t$(options.target).fadeOut(duration, function () {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}\n\n\t\treturn that;\n\t}\n\treturn fade();\n});\n\n\n\n","define('transition/intro',['require','jquery','./fade'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\tvar fade = require(\"./fade\");\n\n\tfunction intro(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\t\t\n\t\tif (options.fx !== true) {\n\t\t\tdeferred.resolve();\n\t\t\treturn promise;\n\t\t}\n\t\t\n\t\tvar transition = options.intro || fade.intro;\n\n\t\ttransition(options, deferred.resolve);\n\n\t\treturn promise;\n\t}\n\treturn intro;\n});\n","define('transition/outro',['require','jquery','./fade'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\tvar fade = require(\"./fade\");\n\n\tfunction outro(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\t\t\n\t\tif (options.fx !== true) {\n\t\t\tdeferred.resolve();\n\t\t\treturn promise;\n\t\t}\n\t\t\n\t\tvar transition = options.outro || fade.outro;\n\n\t\ttransition(options, deferred.resolve);\n\n\t\treturn promise;\n\t}\n\treturn outro;\n});\n","define('utils/severity',['require'],function (require) {\n\n\tfunction severity() {\n\n\t\tthis.DEBUG = 0;\n\t\tthis.INFO = 1;\n\t\tthis.WARNING = 2;\n\t\tthis.ERROR = 3;\n\t}\n\n\treturn new severity();\n});\n\n","define('ractivelib/render/create',['require','jquery','../../utils/utils','../../utils/severity'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\tvar utils = require(\"../../utils/utils\");\n\tvar severity = require(\"../../utils/severity\");\n\n\tfunction create(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\n\t\tif (options.viewOrPromise == null) {\n\t\t\tconsole.warn(\"Ignoring view since onInit returned null. onInit must return either a Ractive function or a promise that resolves to a Ractive function.\");\n\t\t\t// TODO how to handle errors in kudu generically?\n\t\t\tdeferred.reject({level: severity.INFO, message: \"Ignoring view since onInit returned null. onInit must return either a Ractive function or a promise that resolves to a Ractive function.\"});\n\t\t\treturn promise;\n\t\t}\n\n\t\tif (utils.isPromise(options.viewOrPromise)) {\n\n\t\t\toptions.viewOrPromise.then(function (ractiveObj) {\n\n\t\t\t\tif (typeof ractiveObj === 'function') {\n\t\t\t\t\tractiveObj = new ractiveObj();\n\t\t\t\t}\n\n\t\t\t\t// Request could have been overwritten by new request. Ensure this is still the active request\n\t\t\t\tif (!options.mvc.requestTracker.active) {\n\t\t\t\t\tdeferred.reject(\"Request overwritten by another view request\");\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\tvar view = ractiveObj;\n\t\t\t\tdeferred.resolve(view);\n\n\t\t\t}, function () {\n\t\t\t\tif (!options.mvc.requestTracker.active && arguments.length === 0) {\n\t\t\t\t\tdeferred.reject(\"Request overwritten by another view request\");\n\t\t\t\t} else {\n\t\t\t\t\t// if the Ctrl.onInit() call rejected promise\n\t\t\t\t\tdeferred.reject.apply(deferred, arguments);\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t} else if ($.isFunction(options.viewOrPromise)) {\n\t\t\t// Assume it is a Ractive function\n\t\t\t// Should this scenrio be supported? How will the view receive an instance to the ractive\n\t\t\t//options.kudu.createRactive(RactiveFnOrPromise);\n\t\t\tvar view = new options.viewOrPromise();\n\t\t\tdeferred.resolve(view);\n\n\t\t} else if (utils.isRactiveObject(options.viewOrPromise)) {\n\t\t\t// Assume it is a Ractive instance\n\t\t\tvar view = options.viewOrPromise;\n\t\t\tdeferred.resolve(view);\n\n\t\t} else {\n\t\t\tconsole.warn(\"Ignoring view since onInit did not return a valid response. onInit must return either a Ractive function or a promise that resolves to a Ractive function.\");\n\t\t\tdeferred.reject(\"Ignoring view since onInit did not return a valid response. onInit must return either a Ractive function or a promise that resolves to a Ractive function.\");\n\t\t}\n\n\t\treturn promise;\n\t}\n\n\treturn create;\n});\n","define('ractivelib/render/render',['require','jquery'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\n\tfunction render(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\n\t\toptions.view.transitionsEnabled = false;\n\n\t\toptions.view.render(options.target).then(function () {\n\n\t\t\toptions.view.transitionsEnabled = true;\n\t\t\t\n\t\t\tdeferred.resolve(options.view);\n\n\t\t}, function (error) {\n\t\t\tdeferred.reject(error, options.view);\n\t\t});\n\n\t\treturn promise;\n\t}\n\treturn render;\n});\n","define('ractivelib/render/unrender',['require','jquery'],function (require) {\n\n\tvar $ = require(\"jquery\");\n\n\tfunction unrender(options) {\n\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\t\t\n\t\toptions.mvc.view.transitionsEnabled = false;\n\t\t//options.view.transitionsEnabled = false;\n\n\t\toptions.mvc.view.unrender().then(function () {\n\t\t//options.view.unrender(options.target).then(function () {\n\t\t\t\n\t\t\tdeferred.resolve(options.view);\n\n\t\t}, function (error) {\n\t\t\tdeferred.reject(error, options.view);\n\t\t});\n\n\t\treturn promise;\n\t}\n\treturn unrender;\n});\n","define('ractivelib/RactiveViewFactory',['require','./render/create','./render/render','./render/unrender'],function (require) {\n\n\tvar createView = require(\"./render/create\");\n\tvar renderView = require(\"./render/render\");\n\tvar unrenderView = require(\"./render/unrender\");\n\n\tfunction ractiveViewFactory() {\n\n\t\tvar that = {};\n\n\t\tthat.createView = function (options) {\n\t\t\treturn createView(options);\n\n\t\t};\n\t\t\n\t\tthat.renderView = function (options) {\n\t\t\treturn renderView(options);\n\t\t};\n\t\t\n\t\tthat.unrenderView = function (options) {\n\t\t\treturn unrenderView(options);\n\t\t};\n\n\t\treturn that;\n\t}\n\treturn new ractiveViewFactory();\n});\n","// Events order\n//    RACTIVE  -> CTRL       => GLOBAL EVENT\n//             -> onRemove   => remove             (old view)\n//                           => beforeUnrender     (old view)\n//\t\t\t   ->            => beforeInit         (new view)\n//\t\t\t   -> onInit     => init               (new view)\n//   unrender  -> onUnrender => unrender           (old view)\n//   render    -> onRender   => render             (new view)\n//   complete  -> onComplete => complete           (new view)\n//   \n//   -----\n// viewFail - should this event be supported?\n\ndefine('kudu',['require','./router/router','jquery','ractive','./utils/ajaxTracker','./utils/simpleAjaxTracker','./lifecycle/onInitHandler','./lifecycle/onRemoveHandler','./ractivelib/setupEvents','./ractivelib/setupDefaultEvents','./transition/intro','./transition/outro','./ractivelib/RactiveViewFactory','./utils/severity','./utils/utils'],function (require) {\n\n\tvar router = require(\"./router/router\");\n\tvar $ = require(\"jquery\");\n\tvar Ractive = require(\"ractive\");\n\tvar ajaxTrackerFn = require(\"./utils/ajaxTracker\");\n\tvar simpleAjaxTrackerFn = require(\"./utils/simpleAjaxTracker\");\n\tvar onInitHandler = require(\"./lifecycle/onInitHandler\");\n\tvar onRemoveHandler = require(\"./lifecycle/onRemoveHandler\");\n\tvar setupViewEvents = require(\"./ractivelib/setupEvents\");\n\tvar setupDefaultViewEvents = require(\"./ractivelib/setupDefaultEvents\");\n\tvar introFn = require(\"./transition/intro\");\n\tvar outroFn = require(\"./transition/outro\");\n\tvar ractiveViewFactory = require(\"./ractivelib/RactiveViewFactory\");\n\t//var unrenderView = require(\"./ractivelib/render/unrender\");\n\tvar severity = require(\"./utils/severity\");\n\tvar utils = require(\"./utils/utils\");\n\n\tfunction kudu() {\n\n\t\tvar that = {};\n\t\t\n\t\tthat.lc = {};\n\n\t\t// \n\t\tvar reenableAnimationTracker = {enable: true};\n\n\t\t//var routes;\n\n\t\tvar currentMVC = {\n\t\t\tview: null,\n\t\t\tctrl: null,\n\t\t\trequestTracker: {active: true},\n\t\t\troute: null,\n\t\t\toptions: {\n\t\t\t\trouteParams: null,\n\t\t\t\targs: null\n\t\t\t}\n\t\t};\n\n\t\tvar callstack = [];\n\n\t\tvar initOptions = {\n\t\t\ttarget: null,\n\t\t\troutes: null,\n\t\t\tdefaultRoute: null,\n\t\t\tunknownRouteResolver: null,\n\t\t\tintro: null,\n\t\t\toutro: null,\n\t\t\tfx: false,\n\t\t\tviewFactory: ractiveViewFactory,\n\t\t\tdebug: true\n\t\t};\n\n\t\tvar ajaxTracker = ajaxTrackerFn(that);\n\n\t\tthat.init = function (options) {\n\t\t\tif (options == null) {\n\t\t\t\tthrow new Error(\"kudu.init() requires options!\");\n\t\t\t}\n\t\t\t$.extend(initOptions, options);\n\t\t\tthat.validateInitOptions(initOptions);\n\n\t\t\tRactive.DEBUG = initOptions.debug;\n\n\t\t\trouter.on('routeload', function (routeOptions) {\n\t\t\t\tif (that.getActiveRoute() == null) {\n\t\t\t\t\trouteOptions.initialRoute = true;\n\t\t\t\t} else {\n\t\t\t\t\trouteOptions.initialRoute = false;\n\t\t\t\t}\n\t\t\t\tthat.routeLoaded(routeOptions);\n\t\t\t});\n\n\t\t\tsetupDefaultViewEvents(options);\n\n\t\t\trouter.init({\n\t\t\t\troutes: initOptions.routes,\n\t\t\t\tdefaultRoute: options.defaultRoute,\n\t\t\t\tunknownRouteResolver: options.unknownRouteResolver\n\t\t\t});\n\t\t};\n\n\t\tthat.router = function () {\n\t\t\treturn router;\n\t\t};\n\n\t\tthat.validateInitOptions = function (options) {\n\t\t\tif (options.viewFactory == null) {\n\t\t\t\tthrow new Error(\"viewFactory cannot be null!\");\n\t\t\t}\n\t\t\tif (options.viewFactory.createView == null) {\n\t\t\t\tthrow new Error(\"viewFactory must provide a createView function!\");\n\t\t\t}\n\t\t\tif (options.viewFactory.renderView == null) {\n\t\t\t\tthrow new Error(\"viewFactory must provide a renderView function!\");\n\t\t\t}\n\t\t\tif (options.viewFactory.unrenderView == null) {\n\t\t\t\tthrow new Error(\"viewFactory must provide an unrenderView function!\");\n\t\t\t}\n\t\t};\n\n\t\tthat.go = function (options) {\n\t\t\trouter.go(options);\n\t\t};\n\n\t\tthat.getDefaultTarget = function () {\n\t\t\treturn initOptions.target;\n\t\t};\n\n\t\tthat.getActiveRoute = function () {\n\t\t\treturn currentMVC.route;\n\t\t};\n\n\t\tthat.routeLoaded = function (options) {\n\n\t\t\ttry {\n\t\t\t\tcallstack.push(1);\n\n\t\t\t\toptions.target = options.target || initOptions.target;\n\t\t\t\toptions.routeParams = options.routeParams || {};\n\t\t\t\toptions.args = options.args || {};\n\t\t\t\toptions.ajaxTracker = simpleAjaxTrackerFn.create(ajaxTracker, options);\n\n\t\t\t\t//options.requestTracker = currentMVC.requestTracker;\n\t\t\t\toptions.mvc = $.extend({}, currentMVC);\n\n\t\t\t\t// cancel and cleanup current view request (if there is one)\n\t\t\t\tcancelCurrentRequest(options);\n\n\t\t\t\t// Create a requestTracker for the new view\n\t\t\t\tvar requestTracker = {active: true};\n\t\t\t\tcurrentMVC.requestTracker = requestTracker;\n\t\t\t\toptions.mvc.requestTracker = requestTracker;\n\n\t\t\t\t// Disable transitions if view requests overwrite one another, eg when another view request is being processed still\n\t\t\t\tif (callstack.length > 1) {\n\t\t\t\t\t$.fx.off = true;\n\t\t\t\t\t$(options.target).stop(true, true);\n\t\t\t\t\treenableAnimationTracker.enable = false;\n\t\t\t\t}\n\n\t\t\t\tvar ctrl = that.createController(options.module);\n\t\t\t\toptions.ctrl = ctrl;\n\t\t\t\tdelete options.module;\n\t\t\t\t//options.requestTracker = currentMVC.requestTracker;\n\n\t\t\t\tif (currentMVC.ctrl == null) {\n\t\t\t\t\t// No view rendered so skip removing the current view and just init the new view\n\t\t\t\t\tprocessOnInit(options).then(function () {\n\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\t// processOnInit failed\n\t\t\t\t\t\tcancelCurrentRequest(options);\n\n\t\t\t\t\t\tvar arg1 = arguments[0];\n\t\t\t\t\t\tif (arg1 != null && arg1.level < severity.ERROR) {\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//TODO should viewFailed be called like this with args: var args = Array.slice.call( arguments );\n\t\t\t\t\t\t\tviewFailed(options, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprocessOnRemove(options).then(function () {\n\t\t\t\t\t\tprocessOnInit(options).then(function () {\n\n\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t// processOnInit failed\n\t\t\t\t\t\t\tcancelCurrentRequest(options);\n\n\t\t\t\t\t\t\tvar arg1 = arguments[0];\n\t\t\t\t\t\t\tif (arg1 != null && arg1.level < severity.ERROR) {\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//TODO should viewFailed be called like this with args: var args = Array.slice.call( arguments );\n\t\t\t\t\t\t\t\tviewFailed(options, arguments);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\t// processOnRemove failed\n\t\t\t\t\t\tcancelCurrentRequest(options);\n\t\t\t\t\t\tviewFailed(options, arguments);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tviewFailed(options, [e]);\n\t\t\t}\n\t\t};\n\n\t\tthat.createController = function (Module) {\n\t\t\tif (Module instanceof Function) {\n\t\t\t\t// Instantiate new view\n\t\t\t\tvar result = new Module();\n\t\t\t\tif (result.id == null) {\n\t\t\t\t\tsetId(result, Module.id);\n\t\t\t\t}\n\t\t\t\treturn result;\n\n\t\t\t} else {\n\t\t\t\t// Module is not a Function, so assume it is an object and thus already instantiated\n\t\t\t\treturn Module;\n\t\t\t}\n\t\t};\n\n\t\tthat.processNewView = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tsetupViewEvents(options);\n\n\t\t\tvar renderer;\n\n\t\t\tif (options.route.enter == null && (currentMVC.route == null || currentMVC.route.leave == null)) {\n\t\t\t\trenderer = that.renderViewWithAnimation;\n\t\t\t} else {\n\t\t\t\trenderer = that.customRenderView;\n\t\t\t}\n\n\t\t\trenderer(options).then(function () {\n\t\t\t\tthat.callViewEvent(\"onComplete\", options);\n\t\t\t\tthat.triggerEvent(\"complete\", options);\n\t\t\t\tdeferred.resolve(options.view);\n\n\t\t\t}, function (error, view) {\n\t\t\t\t//viewFailed(options, [error]);\n\t\t\t\t// render Ractive rejeced\n\t\t\t\t//deferred.reject(error);\n\t\t\t\tdeferred.reject(error, view);\n\t\t\t});\n\n\t\t\t// Request could have been overwritten by new request. Ensure this is still the active request\n\t\t\tif (!options.mvc.requestTracker.active) {\n\t\t\t\tdeferred.reject(\"Request overwritten by another view request\");\n\t\t\t}\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.callViewEvent = function (eventName, options) {\n\n\t\t\tvar ctrl = options.ctrl;\n\t\t\tif (typeof ctrl[eventName] == 'function') {\n\n\t\t\t\tvar currOptions = {\n\t\t\t\t\tajaxTracker: options.ajaxTracker,\n\t\t\t\t\trouteParams: options.routeParams,\n\t\t\t\t\targs: options.args,\n\t\t\t\t\tview: options.view,\n\t\t\t\t\tctrl: options.ctrl,\n\t\t\t\t\troute: options.route\n\t\t\t\t};\n\n\t\t\t\tvar prevOptions = {\n\t\t\t\t\tajaxTracker: options.mvc.options.ajaxTracker, // TODO test this\n\t\t\t\t\tctrl: options.mvc.ctrl,\n\t\t\t\t\troute: options.mvc.route,\n\t\t\t\t\trouteParams: options.mvc.options.routeParams,\n\t\t\t\t\targs: options.mvc.options.args,\n\t\t\t\t\tview: options.mvc.view\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar eventOptions = {};\n\n\t\t\t\tif (eventName === 'onUnrender') {\n\t\t\t\t\t\n\t\t\t\t\teventOptions = prevOptions;\n\t\t\t\t\teventOptions.next = currOptions;\n\n\t\t\t\t} else {\n\t\t\t\t\teventOptions = currOptions;\n\t\t\t\t\teventOptions.prev = prevOptions;\n\t\t\t\t}\n\n\t\t\t\tctrl[eventName](eventOptions);\n\t\t\t}\n\t\t};\n\n\t\tthat.triggerEvent = function (eventName, options) {\n\t\t\toptions = options || {};\n\t\t\toptions.mvc = options.mvc || {};\n\n\t\t\tvar isMainCtrlReplaced = initOptions.target === options.target;\n\n\t\t\t// If no controller has been defined, create a dummy one to pass to the event\n\t\t\tvar ctrl = options.ctrl;\n\t\t\tif (ctrl == null) {\n\t\t\t\tctrl = {};\n\t\t\t}\n\t\t\t\n\t\t\tvar currOptions = {\n\t\t\t\t\tajaxTracker: options.ajaxTracker,\n\t\t\t\t\trouteParams: options.routeParams,\n\t\t\t\t\targs: options.args,\n\t\t\t\t\tview: options.view,\n\t\t\t\t\tctrl: options.ctrl,\n\t\t\t\t\troute: options.route\n\t\t\t\t};\n\n\t\t\t\tvar prevOptions = {\n\t\t\t\t\tajaxTracker: options.mvc.options.ajaxTracker, // TODO test this\n\t\t\t\t\tctrl: options.mvc.ctrl,\n\t\t\t\t\troute: options.mvc.route,\n\t\t\t\t\trouteParams: options.mvc.options.routeParams,\n\t\t\t\t\targs: options.mvc.options.args,\n\t\t\t\t\tview: options.mvc.view\n\t\t\t\t};\n\n\t\t\tvar triggerOptions = {};\n\t\t\t/*\n\t\t\t\tctrl: options.ctrl,\n\t\t\t\tview: options.view,\n\t\t\t\targs: options.args,\n\t\t\t\trouteParams: options.routeParams,\n\t\t\t\troute: options.route,\n\t\t\t\tisMainCtrl: isMainCtrlReplaced,\n\t\t\t\t//ctrlOptions: options,\n\t\t\t\teventName: eventName,\n\t\t\t\terror: options.error,\n\t\t\t\tinitialRoute: options.initialRoute\n\t\t\t};*/\n\n\t\t\tif (eventName === 'remove'  || eventName === 'beforeUnrender' || eventName === 'unrender') {\n\t\t\t\ttriggerOptions = prevOptions;\n\t\t\t\ttriggerOptions.next = currOptions;\n\n\t\t\t} else if (eventName === 'fail') {\n\t\t\t\ttriggerOptions = prevOptions;\n\t\t\t\ttriggerOptions.prev = prevOptions;\n\t\t\t\ttriggerOptions.next = currOptions;\n\n\t\t\t} else {\n\t\t\t\ttriggerOptions = currOptions;\n\t\t\t\ttriggerOptions.prev = prevOptions;\n\t\t\t}\n\n\t\t\t/*\n\t\t\tvar triggerOptions = {\n\t\t\t\t//oldCtrl: currentMVC.ctrl,\n\t\t\t\toldCtrl: options.mvc.ctrl,\n\t\t\t\tnewCtrl: ctrl,\n\t\t\t\tisMainCtrl: isMainCtrlReplaced,\n\t\t\t\tctrlOptions: options,\n\t\t\t\teventName: eventName,\n\t\t\t\terror: options.error,\n\t\t\t\tinitialRoute: options.initialRoute\n\t\t\t};*/\n\n\t\t\t$(that.lc).trigger(eventName, [triggerOptions]);\n\n\t\t\t// Call events defined as go() options\n\t\t\tif (options[eventName]) {\n\t\t\t\toptions[eventName](triggerOptions);\n\t\t\t}\n\t\t};\n\n\t\tfunction processOnInit(options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tvar onInitOptions = {\n\t\t\t\troute: options.route,\n\t\t\t\tctrl: options.ctrl,\n\t\t\t\trouteParams: options.routeParams,\n\t\t\t\targs: options.args,\n\t\t\t\tmvc: options.mvc,\n\t\t\t\tajaxTracker: options.ajaxTracker,\n\t\t\t\ttarget: options.target,\n\t\t\t\tprev: {\n\t\t\t\t\tajaxTracker: options.mvc.options.ajaxTracker,\n\t\t\t\t\tctrl: options.mvc.ctrl,\n\t\t\t\t\troute: options.mvc.route,\n\t\t\t\t\trouteParams: options.mvc.options.routeParams,\n\t\t\t\t\tview: options.mvc.view,\n\t\t\t\t\targs: options.mvc.options.args\n\t\t\t\t}\n\t\t\t};\n\t\t\tthat.triggerEvent(\"beforeInit\", options);\n\n\t\t\tonInitHandler(onInitOptions).then(function (viewOrPromise) {\n\n\t\t\t\toptions.viewOrPromise = viewOrPromise;\n\t\t\t\tthat.createView(options).then(function (view) {\n\n\t\t\t\t\toptions.view = view;\n\t\t\t\t\toptions.kudu = that;\n\t\t\t\t\tthat.triggerEvent(\"init\", options);\n\n\t\t\t\t\tthat.processNewView(options).then(function (view) {\n\n\t\t\t\t\t\tonInitComplete();\n\t\t\t\t\t\tdeferred.resolve();\n\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\t// processNewView rejected\n\t\t\t\t\t\tonInitComplete();\n\t\t\t\t\t\tdeferred.reject.apply(deferred, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t}, function () {\n\t\t\t\t\t// view creation rejected\n\t\t\t\t\tonInitComplete();\n\t\t\t\t\tdeferred.reject.apply(deferred, arguments);\n\t\t\t\t\t//deferred.reject(arguments);\n\t\t\t\t});\n\n\t\t\t}, function () {\n\t\t\t\t// onInitHandler rejected\n\n\t\t\t\tonInitComplete();\n\t\t\t\tdeferred.reject.apply(deferred, arguments);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\n\t\tfunction processOnRemove(options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tvar onRemoveOptions = {\n\t\t\t\tnext: {\n\t\t\t\t\tctrl: options.ctrl,\n\t\t\t\t\troute: options.route,\n\t\t\t\t\tview: options.view,\n\t\t\t\t\targs: options.args,\n\t\t\t\t\trouteParams: options.routeParams,\n\t\t\t\t\tajaxTracker: options.ajaxTracker\n\t\t\t\t},\n\t\t\t\tctrl: currentMVC.ctrl,\n\t\t\t\troute: currentMVC.route,\n\t\t\t\tview: currentMVC.view,\n\t\t\t\trouteParams: currentMVC.options.routeParams,\n\t\t\t\targs: currentMVC.options.args,\n\t\t\t\tmvc: options.mvc,\n\t\t\t\tajaxTracker: currentMVC.options.ajaxTracker,\n\t\t\t\ttarget: currentMVC.options.target\n\t\t\t\t\t\t//kudu: that\n\t\t\t};\n\n\t\t\tonRemoveHandler(onRemoveOptions).then(function () {\n\t\t\t\t\n\t\t\t\tthat.triggerEvent(\"remove\", options);\n\n\t\t\t\tthat.triggerEvent(\"beforeUnrender\", options);\n\n\t\t\t\tdeferred.resolve();\n\n\t\t\t}, function () {\n\t\t\t\t// ctrl.onRemove failed or cancelled\n\t\t\t\t//options.view.transitionsEnabled = true;\n\n\t\t\t\tif (currentMVC.view != null) {\n\t\t\t\t\tcurrentMVC.view.transitionsEnabled = true;\n\t\t\t\t}\n\t\t\t\tdeferred.reject.apply(deferred, arguments);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\n\t\tthat.enter = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tvar introOptions = {\n\t\t\t\tduration: 'fast',\n\t\t\t\ttarget: options.target,\n\t\t\t\tintro: initOptions.intro,\n\t\t\t\tfx: initOptions.fx || false\n\t\t\t};\n\n\t\t\tif (currentMVC.ctrl == null) {\n\t\t\t\tintroOptions.firstView = true;\n\t\t\t}\n\n\t\t\tthat.renderView(options).then(function () {\n\n\t\t\t\tintroFn(introOptions).then(function () {\n\t\t\t\t\tdeferred.resolve(options.view);\n\t\t\t\t});\n\n\t\t\t}, function (error, view) {\n\t\t\t\t// render Ractive rejeced\n\t\t\t\tdeferred.reject(error, view);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.leave = function (options) {\n\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tvar outroOptions = {\n\t\t\t\tduration: 100,\n\t\t\t\ttarget: options.target,\n\t\t\t\toutro: initOptions.outro,\n\t\t\t\tfx: initOptions.fx || false\n\t\t\t};\n\n\t\t\tif (currentMVC.ctrl == null) {\n\t\t\t\toutroOptions.firstView = true;\n\t\t\t\toutroOptions.duration = 0;\n\t\t\t}\n\n\t\t\toutroFn(outroOptions).then(function () {\n\t\t\t\tif (!options.mvc.requestTracker.active) {\n\t\t\t\t\tdeferred.reject(\"Request overwritten by another view request\", options.view);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthat.unrenderView(options).then(function () {\n\t\t\t\t\tdeferred.resolve(options.view);\n\n\t\t\t\t}, function (error, view) {\n\t\t\t\t\tdeferred.reject(error, view);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.renderViewWithAnimation = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tthat.leave(options).then(function () {\n\t\t\t\tthat.enter(options).then(function () {\n\t\t\t\t\tdeferred.resolve(options.view);\n\t\t\t\t}, function (error, view) {\n\t\t\t\t\t// render Ractive rejeced\n\t\t\t\t\tdeferred.reject(error, view);\n\t\t\t\t});\n\t\t\t}, function (error, view) {\n\t\t\t\t// render Ractive rejeced\n\t\t\t\tdeferred.reject(error, view);\n\t\t\t});\n\n\t\t\t/*\n\t\t\t \n\t\t\t var outroOptions = {\n\t\t\t duration: 100,\n\t\t\t target: options.target,\n\t\t\t outro: initOptions.outro\n\t\t\t };\n\t\t\t var introOptions = {\n\t\t\t duration: 'fast',\n\t\t\t target: options.target,\n\t\t\t intro: initOptions.intro\n\t\t\t };\n\t\t\t if (currentMVC.ctrl == null) {\n\t\t\t outroOptions.firstView = introOptions.firstView = true;\n\t\t\t outroOptions.duration = 0;\n\t\t\t }\n\t\t\t \n\t\t\t outroFn(outroOptions).then(function () {\n\t\t\t if (!options.mvc.requestTracker.active) {\n\t\t\t deferred.reject(\"Request overwritten by another view request\");\n\t\t\t return;\n\t\t\t }\n\t\t\t \n\t\t\t that.unrenderView(options).then(function () {\n\t\t\t \n\t\t\t that.renderView(options).then(function () {\n\t\t\t \n\t\t\t introFn(introOptions).then(function () {\n\t\t\t deferred.resolve(options.view);\n\t\t\t });\n\t\t\t \n\t\t\t }, function (error, view) {\n\t\t\t // render Ractive rejeced\n\t\t\t deferred.reject(error, view);\n\t\t\t });\n\t\t\t \n\t\t\t }, function (error, view) {\n\t\t\t deferred.reject(error, view);\n\t\t\t });\n\t\t\t });\n\t\t\t */\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.customLeave = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tvar leaveOptions = {\n\t\t\t\tctrl: currentMVC.ctrl,\n\t\t\t\tview: currentMVC.view,\n\t\t\t\troute: currentMVC.route,\n\t\t\t\tnext: {\n\t\t\t\t\tctrl: options.ctrl,\n\t\t\t\t\tview: options.view,\n\t\t\t\t\troute: options.route,\n\t\t\t\t},\n\t\t\t\ttarget: options.target\n\t\t\t};\n\n\t\t\tvar leaveFn;\n\t\t\tvar leaveCleanupFn;\n\n\t\t\tif (options.mvc.view == null) {\n\t\t\t\t// No view rendered yet, so we stub the leaveFn\n\t\t\t\tleaveFn = function () {\n\t\t\t\t};\n\t\t\t\tleaveCleanupFn = utils.noopPromise;\n\n\t\t\t} else {\n\n\t\t\t\tif (currentMVC.route != null) {\n\t\t\t\t\tleaveFn = currentMVC.route.leave;\n\t\t\t\t\tleaveCleanupFn = that.unrenderViewCleanup;\n\t\t\t\t}\n\n\t\t\t\t// If leave not defined or there is no view to unreder, fallback to unrenderView\n\t\t\t\tif (leaveFn == null) {\n\t\t\t\t\t//leaveFn = that.unrenderView;\n\t\t\t\t\tleaveFn = that.leave;\n\n\t\t\t\t\t//Since we unrederView we don't need to perform unrenderCleanup, so we stub it out\n\t\t\t\t\tleaveCleanupFn = utils.noopPromise;\n\n\t\t\t\t\tleaveOptions = options; // set leaveOptions to options, since we are going to use unrenderView instead\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar leavePromise = leaveFn(leaveOptions);\n\t\t\tif (leavePromise == null) {\n\t\t\t\tleavePromise = utils.noopPromise();\n\t\t\t}\n\n\t\t\tleavePromise.then(function () {\n\n\t\t\t\tleaveCleanupFn(options).then(function () {\n\t\t\t\t\tif (!options.mvc.requestTracker.active) {\n\t\t\t\t\t\tdeferred.reject(\"Request overwritten by another view request\", options.mvc.view);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdeferred.resolve();\n\n\t\t\t\t}, function (error) {\n\t\t\t\t\tdeferred.reject(error, options.view);\n\t\t\t\t});\n\n\t\t\t}, function () {\n\t\t\t\tdeferred.reject(\"Error during route.leave()\");\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.customEnter = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tvar enterOptions = {\n\t\t\t\tctrl: options.ctrl,\n\t\t\t\tview: options.view,\n\t\t\t\troute: options.route,\n\t\t\t\tprev: {\n\t\t\t\t\tctrl: currentMVC.ctrl,\n\t\t\t\t\tview: currentMVC.view,\n\t\t\t\t\troute: currentMVC.route\n\t\t\t\t},\n\t\t\t\ttarget: options.target\n\t\t\t};\n\n\t\t\tvar enterFn = options.route.enter;\n\t\t\tvar enterCleanupFn = that.renderViewCleanup;\n\n\t\t\t// If enter not defined, fallback to renderView\n\t\t\tif (enterFn == null) {\n\t\t\t\tenterFn = that.enter;\n\t\t\t\t//enterFn = that.renderView;\n\n\t\t\t\t//Since we unrederView we don't need to perform unrenderCleanup, so we stub it out\n\t\t\t\tenterCleanupFn = utils.noopPromise;\n\n\t\t\t\tenterOptions = options; // set leaveOptions to options, since we are going to use unrenderView instead\n\t\t\t}\n\n\t\t\tvar enterPromise = enterFn(enterOptions);\n\t\t\tif (enterPromise == null) {\n\t\t\t\tenterPromise = utils.noopPromise();\n\t\t\t}\n\n\t\t\tenterPromise.then(function () {\n\n\t\t\t\tenterCleanupFn(options).then(function () {\n\t\t\t\t\tdeferred.resolve(options.view);\n\n\t\t\t\t}, function (error) {\n\t\t\t\t\tdeferred.reject(error, options.view);\n\t\t\t\t});\n\n\t\t\t}, function () {\n\t\t\t\tdeferred.reject(\"Error during route.enter()\");\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t};\n\n\t\t// User provided rendering during route setup\n\t\tthat.customRenderView = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tthat.customLeave(options).then(function () {\n\n\t\t\t\tthat.customEnter(options).then(function () {\n\n\t\t\t\t\tdeferred.resolve(options.view);\n\n\t\t\t\t}, function (error, view) {\n\t\t\t\t\tdeferred.reject(error, view);\n\t\t\t\t});\n\n\t\t\t}, function (error, view) {\n\t\t\t\tdeferred.reject(error, view);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.createView = function (options) {\n\t\t\tvar promise = initOptions.viewFactory.createView(options);\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.renderView = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\t//options.view.transitionsEnabled = false;\n\n\t\t\tvar renderPromise = initOptions.viewFactory.renderView(options);\n\n\t\t\trenderPromise.then(function () {\n\n\t\t\t\tthat.renderViewCleanup(options).then(function () {\n\n\t\t\t\t\tdeferred.resolve(options.view);\n\n\t\t\t\t}, function (error) {\n\t\t\t\t\tdeferred.reject(error, options.view);\n\t\t\t\t});\n\n\n\t\t\t}, function (error) {\n\t\t\t\tdeferred.reject(error, options.view);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.renderViewCleanup = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\t// Store new controller and view on currentMVC\n\t\t\tthat.updateMVC(options);\n\n\t\t\t//options.view.transitionsEnabled = true;\n\n\t\t\t// Seems that Ractive render swallows errors so here we catch and log errors thrown by the render event\n\t\t\ttry {\n\t\t\t\tthat.callViewEvent(\"onRender\", options);\n\t\t\t\tthat.triggerEvent(\"render\", options);\n\n\t\t\t} catch (error) {\n\t\t\t\tdeferred.reject(error);\n\t\t\t\treturn promise;\n\t\t\t}\n\t\t\tdeferred.resolve();\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.unrenderView = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\tif (options.mvc.view == null) {\n\t\t\t\t// No view to unrender\n\t\t\t\tdeferred.resolve();\n\n\t\t\t} else {\n\n\t\t\t\t//options.mvc.view.transitionsEnabled = false;\n\t\t\t\tvar unrenderPromise = initOptions.viewFactory.unrenderView(options);\n\n\t\t\t\tunrenderPromise.then(function () {\n\t\t\t\t\t//options.mvc.view.unrender().then(function () {\n\n\t\t\t\t\tthat.unrenderViewCleanup(options).then(function () {\n\n\t\t\t\t\t\tif (!options.mvc.requestTracker.active) {\n\t\t\t\t\t\t\tdeferred.reject(\"Request overwritten by another view request\", options.mvc.view);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdeferred.resolve(options.mvc.view);\n\n\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\tdeferred.reject(error, options.view);\n\t\t\t\t\t});\n\n\t\t\t\t}, function () {\n\n\t\t\t\t\tdeferred.reject(options.mvc.view);\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.unrenderViewCleanup = function (options) {\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar promise = deferred.promise();\n\n\t\t\t// Seems that Ractive unrender swallows errors so here we catch and log errors thrown by the unrender event\n\t\t\ttry {\n\t\t\t\tthat.callViewEvent(\"onUnrender\", options);\n\t\t\t\tthat.triggerEvent(\"unrender\", options);\n\n\t\t\t} catch (error) {\n\t\t\t\tdeferred.reject(error);\n\t\t\t\treturn promise;\n\t\t\t}\n\n\t\t\tdeferred.resolve();\n\t\t\treturn promise;\n\t\t};\n\n\t\tthat.updateMVC = function (options) {\n\t\t\tcurrentMVC.view = options.view;\n\t\t\tcurrentMVC.ctrl = options.ctrl;\n\t\t\tcurrentMVC.options = options;\n\t\t\tcurrentMVC.route = options.route;\n\t\t};\n\n\t\tfunction onInitComplete() {\n\t\t\tcallstack.splice(0, 1);\n\t\t\tif (callstack.length === 0) {\n\t\t\t\t//console.log(\"AT 0\");\n\n\t\t\t\t// Delay switching on animation incase user is still clicking furiously\n\t\t\t\treenableAnimationTracker.enable = false;\n\t\t\t\treenableAnimationTracker = {enable: true};\n\t\t\t\treenableAnimations(reenableAnimationTracker);\n\t\t\t} else {\n\t\t\t\t//console.log(\"AT \", callstack.length);\n\t\t\t}\n\t\t}\n\n\t\tfunction reenableAnimations(reenableAnimationTracker) {\n\t\t\t// We wait a bit before enabling animations in case user is still thrashing UI.\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (reenableAnimationTracker.enable) {\n\t\t\t\t\t$.fx.off = false;\n\t\t\t\t}\n\t\t\t}, 350);\n\t\t}\n\n\t\tfunction viewFailed(options, errorArray) {\n\t\t\tvar errors = errorArray;\n\t\t\tif (!$.isArray(errorArray)) {\n\t\t\t\terrors = Array.prototype.slice.call(errorArray);\n\t\t\t}\n\t\t\toptions.error = errors;\n\t\t\tthat.triggerEvent(\"viewFail\", options);\n\n\t\t\tif (initOptions.debug) {\n\t\t\t\tif (options.error.length === 0) {\n\t\t\t\t\tconsole.error(\"error occurred!\", options);\n\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = 0; i < options.error.length; i++) {\n\t\t\t\t\t\tconsole.error(options.error[i].stack);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction cancelCurrentRequest(options) {\n\n\t\t\t// Check if request has already been overwritten\n\t\t\tif (options.mvc.requestTracker.active === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// current controller has been overwritten by new request\n\t\t\toptions.mvc.requestTracker.active = false;\n\n\t\t\tajaxTracker.abort(options.target);\n\t\t\tajaxTracker.clear(options.target);\n\n\t\t}\n\n\t\tfunction setId(obj, id) {\n\t\t\t// Create an ID property which isn't writable or iteratable through for in loops.\n\t\t\tif (!obj.id) {\n\t\t\t\tObject.defineProperty(obj, \"id\", {\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twritable: false,\n\t\t\t\t\tvalue: id\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn that;\n\t}\n\n\tvar result = kudu();\n\treturn result;\n});\n\n"]}